(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-42bf6907","fail","userforget","userlogin"],{"04f1":function(e,t,a){},"0673":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"exception"},[a("div",{staticClass:"img"},[a("img",{attrs:{src:e.config[e.type].img}})]),a("div",{staticClass:"content"},[a("h1",[e._v(e._s(e.config[e.type].title))]),a("div",{staticClass:"desc"},[e._v(e._s(e.config[e.type].desc))]),a("div",{staticClass:"action"},[a("a-button",{attrs:{type:"primary"},on:{click:e.handleToHome}},[e._v("返回首页")])],1)])])},o=[],i={403:{img:"https://gw.alipayobjects.com/zos/rmsportal/wZcnGqRDyhPOEYFcZDnb.svg",title:"403",desc:"抱歉，你无权访问该页面"},404:{img:"https://gw.alipayobjects.com/zos/rmsportal/KpnpchXsobRgLElEozzI.svg",title:"404",desc:"抱歉，你访问的页面不存在或无权访问"},500:{img:"https://gw.alipayobjects.com/zos/rmsportal/RVRUAYdCGeYNBWoKiIwB.svg",title:"500",desc:"抱歉，服务器出错了"}},r=i,s={name:"Exception",props:{type:{type:String,default:"404"}},data:function(){return{config:r}},methods:{handleToHome:function(){this.$router.push({name:"index"})}}},c=s,l=(a("a6c4"),a("2877")),u=Object(l["a"])(c,n,o,!1,null,"54f55e08",null);t["default"]=u.exports},"0dfc":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("a-card",{staticStyle:{width:"100%","text-align":"center",background:"rgb(240, 242, 245)"},attrs:{bordered:!1}},[a("a-steps",{staticClass:"steps",attrs:{current:e.currentTab}},[a("a-step",{attrs:{title:"邮箱验证"}}),a("a-step",{attrs:{title:"更改密码"}}),a("a-step",{attrs:{title:"完成"}})],1),a("div",{staticClass:"content"},[0===e.currentTab?a("step2",{on:{nextStep:e.nextStep}}):e._e(),1===e.currentTab?a("step3",{attrs:{mail:e.mail},on:{nextStep:e.nextStep,prevStep:e.prevStep}}):e._e(),2===e.currentTab?a("step4",{on:{prevStep:e.prevStep,finish:e.finish}}):e._e()],1)],1)},o=[],i=a("7763"),r=a("a4ce"),s=a("cd2d"),c={name:"Alteration",components:{Step2:i["default"],Step3:r["default"],Step4:s["default"]},data:function(){return{description:"将一个冗长或用户不熟悉的表单任务分成多个步骤，指导用户完成。",currentTab:0,userList:{},form:null,mail:""}},methods:{nextStep:function(e){this.mail=e.email,this.currentTab<4&&(this.currentTab+=1)},prevStep:function(){this.currentTab>0&&(this.currentTab-=1)},finish:function(){this.currentTab=0}}},l=c,u=(a("7146"),a("2877")),d=Object(u["a"])(l,n,o,!1,null,"edf91c52",null);t["default"]=d.exports},1637:function(e,t,a){"use strict";a("5957")},"16be":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"outter"},[a("div",{staticClass:"buttonsearch"},[a("a-button",{attrs:{type:"primary"},on:{click:function(t){e.addLineVisible=!0}}},[a("a-icon",{attrs:{type:"plus-circle"}}),e._v("新增菜品种类")],1),a("div",{staticClass:"searchout"},[a("a-button",{attrs:{type:"dashed"},on:{click:e.reset}},[e._v("重置")]),a("a-input-search",{staticStyle:{width:"88%"},attrs:{placeholder:"搜索菜品","enter-button":""},on:{search:e.onSearch}})],1)],1),a("a-table",{attrs:{columns:e.columns,pagination:{defaultPageSize:3,position:"both"},"data-source":e.data,bordered:"",fixed:!0,loading:e.tableLoading,defaultExpandAllRows:!0},scopedSlots:e._u([e._l(["name"],(function(t){return{key:t,fn:function(n,o){return[a("div",{key:t},[o.editable&&"套餐"!==n?a("a-input",{staticStyle:{margin:"-5px 0"},attrs:{value:n},on:{change:function(a){return e.handleTchange(a.target.value,o,t)}}}):[e._v(" "+e._s(n)+" ")]],2)]}}})),{key:"method",fn:function(t,n){return[a("div",{staticClass:"editable-row-operations"},[n.editable?a("span",[a("a-button",{attrs:{type:"primary",loading:e.saveLoading},on:{click:function(){return e.tsave(n)}}},[e._v("保存")]),a("a-divider",{attrs:{type:"vertical"}}),a("a-button",{on:{click:function(){return e.tcancel(n)}}},[e._v("取消")])],1):a("span",[a("a-button",{attrs:{disabled:""!==e.editingKey,type:"primary"},on:{click:function(t){return e.addfood(n)}}},[e._v(" 新增菜品 ")]),a("a-divider",{attrs:{type:"vertical"}}),a("a-button",{attrs:{disabled:""!==e.editingKey},on:{click:function(){return e.tedit(n)}}},[e._v("修改")]),a("a-divider",{attrs:{type:"vertical"}}),a("a-popconfirm",{attrs:{disabled:""!==e.editingKey,title:"确定删除吗？"},on:{confirm:function(){return e.deletet(n)}}},[a("a-button",{attrs:{disabled:""!==e.editingKey,type:"danger",loading:n.deleteLoading}},[e._v(" 删除 ")])],1)],1)])]}},{key:"photoUrl",fn:function(t,n){return[n.editable?a("span",[a("a-upload",{attrs:{name:"file",multiple:!0,accept:"image/*",data:function(e){return{photo:e}},action:e.uploadUrl,"show-upload-list":!1},on:{change:function(t){e.handleUrl(t,{record:n})}}},[e.addloading?a("div",[a("a-icon",{attrs:{type:"loading"}})],1):a("a",{staticClass:"uploadimage",attrs:{href:"javascript:;"}},[a("img",{staticStyle:{height:"40px",width:"40px","border-radius":"10px"},attrs:{src:n.photoUrl,alt:""}}),a("div",{staticClass:"zhezhao"},[e._v("修改")])])])],1):a("span",[a("img",{staticStyle:{height:"40px",width:"40px","border-radius":"10px"},attrs:{src:n.photoUrl,alt:""}})])]}},{key:"child",fn:function(t,n){return a("span",{},[e._v(e._s(n.child.length))])}},{key:"expandedRowRender",fn:function(t){return a("a-table",{attrs:{columns:e.innerColumns,"data-source":t.child,pagination:!1},scopedSlots:e._u([e._l(["name","price","describe"],(function(t){return{key:t,fn:function(n,o){return[a("div",{key:t},[o.editable?a("a-input",{staticStyle:{margin:"-5px 0"},attrs:{value:n},on:{change:function(a){return e.handleTchange(a.target.value,o,t)}}}):[a("div",{staticClass:"espli"},[e._v(e._s(n))])]],2)]}}})),{key:"classes",fn:function(t,n){return[n.editable?a("span",[a("a-button",{attrs:{type:"dashed"},on:{click:function(t){return e.changeOption(n)}}},[e._v(e._s(n.classes))])],1):a("span",[e._v(" "+e._s(n.classes)+" ")])]}},{key:"method",fn:function(t,n){return[a("div",{staticClass:"editable-row-operations"},[n.editable?a("span",[a("a-button",{attrs:{type:"primary",loading:e.saveLoading},on:{click:function(){return e.tsave(n)}}},[e._v("保存")]),a("a-divider",{attrs:{type:"vertical"}}),a("a-button",{on:{click:function(){return e.tcancel(n)}}},[e._v("取消")])],1):a("span",[a("a-button",{attrs:{disabled:""!==e.editingKey,type:"primary"},on:{click:function(){return e.tedit(n)}}},[e._v("修改")]),a("a-divider",{attrs:{type:"vertical"}}),a("a-popconfirm",{attrs:{title:"确定删除吗？",disabled:""!==e.editingKey},on:{confirm:function(){return e.deletet(n)}}},[a("a-button",{attrs:{disabled:""!==e.editingKey,type:"danger",loading:n.deleteLoading}},[e._v(" 删除 ")])],1)],1)])]}},{key:"photoUrl",fn:function(t,n){return[n.editable?a("span",[a("a-upload",{attrs:{name:"file",multiple:!0,accept:"image/*",data:function(e){return{photo:e}},action:e.uploadUrl,"show-upload-list":!1},on:{change:function(t){e.handleUrl(t,{record:n})}}},[e.addloading?a("div",[a("a-icon",{attrs:{type:"loading"}})],1):a("a",{staticClass:"uploadimage",attrs:{href:"javascript:;"}},[a("img",{staticStyle:{height:"40px",width:"40px","border-radius":"10px"},attrs:{src:n.photoUrl,alt:""}}),a("div",{staticClass:"zhezhao"},[e._v("修改")])])])],1):a("span",[a("img",{staticStyle:{height:"40px",width:"40px","border-radius":"10px"},attrs:{src:n.photoUrl,alt:""}})])]}}],null,!0)})}}],null,!0)}),a("a-modal",{attrs:{title:"添加食品类别",visible:e.addLineVisible,"confirm-loading":e.confirmLoading,okText:"确认",cancelText:"取消"},on:{ok:function(t){return e.submitForm("lineRuleForm")},cancel:e.handleCancel}},[a("a-form-model",e._b({ref:"lineRuleForm",attrs:{model:e.lineRuleForm,rules:e.linerule}},"a-form-model",e.layout,!1),[a("a-form-model-item",{attrs:{"has-feedback":"",label:"类别名称",prop:"value"}},[a("a-input",{attrs:{autocomplete:"off"},model:{value:e.lineRuleForm.value,callback:function(t){e.$set(e.lineRuleForm,"value",t)},expression:"lineRuleForm.value"}})],1),a("a-form-model-item",{attrs:{"has-feedback":"",label:"图标",prop:"photoUrl"}},[a("a-upload",{staticClass:"avatar-uploader",attrs:{name:"avatar","list-type":"picture-card","show-upload-list":!1,accept:"image/*",data:function(t){return{photo:t,name:e.lineRuleForm.value}},action:e.uploadUrl},on:{change:function(t){e.handleUrl(t,{form:"lineRuleForm"})}}},[e.lineRuleForm.photoUrl?a("img",{staticStyle:{width:"128px",height:"128px"},attrs:{src:e.lineRuleForm.photoUrl,alt:"avatar"}}):a("div",[a("a-icon",{attrs:{type:e.addloading?"loading":"plus"}}),a("div",{staticClass:"ant-upload-text"},[e._v("上传")])],1)])],1)],1)],1),a("a-modal",{attrs:{width:700,title:"添加餐品",visible:e.addFoodVisible,"confirm-loading":e.confirmLoading,okText:"确认",cancelText:"取消",closable:e.addFoodClosable,maskClosable:e.addFoodmaskClosable},on:{ok:function(t){return e.submitForm("foodRuleForm")},cancel:e.handleCancel}},[a("a-form-model",e._b({ref:"foodRuleForm",attrs:{model:e.foodRuleForm,rules:e.foodrule}},"a-form-model",e.layout,!1),[a("a-form-model-item",{attrs:{label:"所属类别",prop:"name"}},[e.addFoodmaskClosable?a("a-select",{staticStyle:{width:"120px"},on:{select:function(t){return e.totalNameChange()}},model:{value:e.foodRuleForm.name,callback:function(t){e.$set(e.foodRuleForm,"name",t)},expression:"foodRuleForm.name"}},e._l(e.data,(function(t){return a("a-select-option",{key:t.key,attrs:{value:t.name}},[e._v(" "+e._s(t.name))])})),1):a("span",[e._v(e._s(e.foodRuleForm.name))])],1),a("a-form-model-item",{attrs:{"has-feedback":"",label:"餐品名称",prop:"value"}},[a("a-input",{attrs:{autocomplete:"off"},model:{value:e.foodRuleForm.value,callback:function(t){e.$set(e.foodRuleForm,"value",t)},expression:"foodRuleForm.value"}})],1),a("a-form-model-item",{attrs:{"has-feedback":"",label:"餐品价格",prop:"price"}},[a("a-input",{attrs:{autocomplete:"off"},model:{value:e.foodRuleForm.price,callback:function(t){e.$set(e.foodRuleForm,"price",t)},expression:"foodRuleForm.price"}})],1),a("a-form-model-item",{attrs:{"has-feedback":"",label:"餐品描述",prop:"describe"}},[a("a-input",{attrs:{autocomplete:"off"},model:{value:e.foodRuleForm.describe,callback:function(t){e.$set(e.foodRuleForm,"describe",t)},expression:"foodRuleForm.describe"}})],1),a("a-form-model-item",{attrs:{"has-feedback":"",label:"图片",prop:"photoUrl"}},[a("a-upload",{staticClass:"avatar-uploader",attrs:{name:"avatar","list-type":"picture-card","show-upload-list":!1,accept:"image/*",data:function(t){return{photo:t,name:e.foodRuleForm.value}},action:e.uploadUrl},on:{change:function(t){e.handleUrl(t,{form:"foodRuleForm"})}}},[e.foodRuleForm.photoUrl?a("img",{staticStyle:{width:"128px",height:"128px"},attrs:{src:e.foodRuleForm.photoUrl,alt:"avatar"}}):a("div",[a("a-icon",{attrs:{type:e.addloading?"loading":"plus"}}),a("div",{staticClass:"ant-upload-text"},[e._v("上传")])],1)])],1),a("a-form-model-item",{attrs:{"has-feedback":"",label:"类别",prop:"classes"}},[a("a-select",{staticStyle:{width:"120px"},model:{value:e.foodRuleForm.classes,callback:function(t){e.$set(e.foodRuleForm,"classes",t)},expression:"foodRuleForm.classes"}},["套餐"!==e.foodRuleForm.name?a("a-select-option",{attrs:{value:"规格"}},[e._v(" 规格 ")]):e._e(),"套餐"!==e.foodRuleForm.name?a("a-select-option",{attrs:{value:"单品"}},[e._v(" 单品 ")]):e._e(),"套餐"===e.foodRuleForm.name?a("a-select-option",{attrs:{value:"套餐"}},[e._v(" 套餐 ")]):e._e()],1),"规格"===e.foodRuleForm.classes||"套餐"===e.foodRuleForm.classes?a("a-button",{attrs:{type:"dashed"},on:{click:function(t){return e.addZu(e.foodRuleForm.classes)}}},[e._v("增加选项组")]):e._e()],1),"规格"===e.foodRuleForm.classes?a("a-form-model-item",{attrs:{"has-feedback":"",label:"选项",prop:"specifications"}},e._l(e.foodRuleForm.specifications,(function(t,n){return a("div",{key:n,staticClass:"specificationsZu"},[a("div",[a("span",[e._v("选项组标题：")]),a("a-select",{staticStyle:{width:"120px"},on:{select:function(a){return e.guigeChange(t)}},model:{value:t.title,callback:function(a){e.$set(t,"title",a)},expression:"item.title"}},[a("a-select-option",{attrs:{value:"规格"}},[e._v(" 规格 ")]),a("a-select-option",{attrs:{value:"熟度"}},[e._v(" 熟度 ")])],1),a("a-button",{attrs:{type:"dashed"},on:{click:function(a){return e.addXiang(t.option)}}},[e._v("增加选项")])],1),a("span",[e._v("默认项：")]),a("a-radio-group",{attrs:{name:t.title},model:{value:t.choose,callback:function(a){e.$set(t,"choose",a)},expression:"item.choose"}},e._l(t.option,(function(t,n){return a("a-radio",{key:n,attrs:{value:t.name}},[e._v(" "+e._s(t.name)+" ")])})),1),a("a-divider"),e._l(t.option,(function(n,o){return a("div",{key:o},[a("span",{staticClass:"specifications"},[e._v("选项名称： "),0!==o?a("a-popconfirm",{staticClass:"deleteXiang",attrs:{title:"确定删除这个选项吗?","ok-text":"确定","cancel-text":"取消"},on:{confirm:function(a){return e.deleteXiangConfirm(t.option,o)}}},[a("a",{attrs:{href:"#"}},[a("a-icon",{staticClass:"smallicon",attrs:{type:"close"}})],1)]):e._e()],1),a("a-select",{staticStyle:{width:"30%"},attrs:{value:n.name},on:{change:function(a){e.comboSelect(t,a,n)}}},e._l(t.itemXuan,(function(t,n){return a("a-select-option",{key:n,attrs:{value:t}},[e._v(" "+e._s(t)+" ")])})),1),a("a-divider",{attrs:{type:"vertical"}}),"熟度"!==t.title&&0!==o?a("span",[e._v("加价：")]):e._e(),"熟度"!==t.title&&0!==o?a("a-input",{staticClass:"specificationsInput",attrs:{placeholder:"原价基础加钱",autocomplete:"off"},model:{value:n.addprice,callback:function(t){e.$set(n,"addprice",t)},expression:"i.addprice"}}):e._e()],1)})),a("a-popconfirm",{staticClass:"deleteZu",attrs:{title:"确定删除这个选项组吗?","ok-text":"确定","cancel-text":"取消"},on:{confirm:function(t){return e.deleteZuConfirm(e.foodRuleForm.classes,n)}}},[a("a",{attrs:{href:"#"}},[a("a-icon",{attrs:{type:"close"}})],1)])],2)})),0):e._e(),"套餐"===e.foodRuleForm.classes?a("a-form-model-item",{attrs:{"has-feedback":"",label:"选项组",prop:"combo"}},e._l(e.foodRuleForm.combo,(function(t,n){return a("div",{key:n,staticClass:"specificationsZu"},[a("div",[a("span",[e._v("选项组标题：")]),a("a-select",{staticStyle:{width:"120px"},on:{select:function(a){return e.itemXuanChange(t)}},model:{value:t.title,callback:function(a){e.$set(t,"title",a)},expression:"item.title"}},e._l(e.data,(function(t){return a("a-select-option",{key:t.key,attrs:{value:t.name}},[e._v(" "+e._s(t.name))])})),1),a("a-button",{attrs:{type:"dashed"},on:{click:function(a){return e.addXiang(t.option)}}},[e._v("增加选项")])],1),a("span",[e._v("默认项：")]),a("a-radio-group",{attrs:{name:t.title},model:{value:t.choose,callback:function(a){e.$set(t,"choose",a)},expression:"item.choose"}},e._l(t.option,(function(t,n){return a("a-radio",{key:n,attrs:{value:t.name}},[e._v(" "+e._s(t.name)+" ")])})),1),a("a-divider"),e._l(t.option,(function(n,o){return a("div",{key:o},[a("span",{staticClass:"specifications"},[e._v("选项名称： "),0!==o?a("a-popconfirm",{staticClass:"deleteXiang",attrs:{title:"确定删除这个选项吗?","ok-text":"确定","cancel-text":"取消"},on:{confirm:function(a){return e.deleteXiangConfirm(t.option,o)}}},[a("a",{attrs:{href:"#"}},[a("a-icon",{staticClass:"smallicon",attrs:{type:"close"}})],1)]):e._e()],1),a("a-select",{staticStyle:{width:"30%"},attrs:{value:n.name},on:{change:function(a){e.comboSelect(t,a,n)}}},e._l(t.itemXuan,(function(t,n){return a("a-select-option",{key:n,attrs:{value:t}},[e._v(" "+e._s(t)+" ")])})),1),a("a-divider",{attrs:{type:"vertical"}}),"熟度"!==t.title&&0!==o?a("span",[e._v("加价：")]):e._e(),"熟度"!==t.title&&0!==o?a("a-input",{staticClass:"specificationsInput",attrs:{placeholder:"原价基础加钱",autocomplete:"off"},model:{value:n.addprice,callback:function(t){e.$set(n,"addprice",t)},expression:"i.addprice"}}):e._e()],1)})),a("a-popconfirm",{staticClass:"deleteZu",attrs:{title:"确定删除这个选项组吗?","ok-text":"确定","cancel-text":"取消"},on:{confirm:function(t){return e.deleteZuConfirm(e.foodRuleForm.classes,n)}}},[a("a",{attrs:{href:"#"}},[a("a-icon",{attrs:{type:"close"}})],1)])],2)})),0):e._e()],1)],1),a("OPTION",{ref:"optionDetail",attrs:{data:e.data,comboMap:e.comboMap}}),a("a-back-top",{attrs:{visibilityHeight:200}})],1)},o=[],i=a("7417"),r=a("5f35"),s=a.n(r),c=a("b775"),l={getAllItem:"/admin/item",addItem:"/admin/itemAdd",itemChange:"/admin/itemChange",deleteItem:"/admin/item",queryItem:"/admin/query-item",categoryAdd:"/admin/categoryAdd",deleteCategory:"/admin/category",categoryChange:"/admin/categoryChange",photoChange:"/admin/photoChange"};function u(){return Object(c["a"])({url:l.getAllItem,method:"get"})}function d(e){return Object(c["a"])({url:l.addItem,method:"post",data:e})}function m(e){return Object(c["a"])({url:l.itemChange,method:"put",data:e})}function f(e){return Object(c["a"])({url:l.deleteItem,method:"delete",params:e})}function p(e){return Object(c["a"])({url:l.queryItem,method:"get",params:e})}function h(e){return Object(c["a"])({url:l.categoryAdd,method:"post",data:e})}function g(e){return Object(c["a"])({url:l.deleteCategory,method:"delete",params:e})}function v(e){return Object(c["a"])({url:l.categoryChange,method:"put",data:e})}function b(e){return C(e)||k(e)||w(e)||y()}function y(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function w(e,t){if(e){if("string"===typeof e)return x(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);return"Object"===a&&e.constructor&&(a=e.constructor.name),"Map"===a||"Set"===a?Array.from(e):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?x(e,t):void 0}}function k(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function C(e){if(Array.isArray(e))return x(e)}function x(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,n=new Array(t);a<t;a++)n[a]=e[a];return n}var _=[{title:"菜品种类",dataIndex:"name",width:"30%",align:"center",scopedSlots:{customRender:"name"}},{title:"菜品个数",dataIndex:"child",width:"10%",align:"center",sorter:function(e,t){return e.child-t.child},sortDirections:["descend","ascend"],scopedSlots:{customRender:"child"}},{title:"种类图标",dataIndex:"photoUrl",width:"20%",align:"center",ellipsis:!0,scopedSlots:{customRender:"photoUrl"}},{title:"操作",dataIndex:"method",align:"center",scopedSlots:{customRender:"method"}}],F=[{title:"菜品名称",dataIndex:"name",width:"15%",align:"center",scopedSlots:{customRender:"name"}},{title:"价格",dataIndex:"price",align:"center",width:"10%",sorter:function(e,t){return e.price-t.price},sortDirections:["descend","ascend"],scopedSlots:{customRender:"price"}},{title:"类别",dataIndex:"classes",align:"center",width:"15%",scopedSlots:{customRender:"classes"}},{title:"描述",dataIndex:"describe",width:"20%",align:"center",scopedSlots:{customRender:"describe"}},{title:"图片",dataIndex:"photoUrl",width:"10%",scopedSlots:{customRender:"photoUrl"},align:"center",ellipsis:!0},{title:"操作",dataIndex:"method",align:"center",scopedSlots:{customRender:"method"}}],O={data:function(){var e=this,t=function(t,a,n){""===a?n(new Error("请输入名称")):a.length>6?n(new Error("名称不应该过长")):e.data.some((function(e){return e.name==a}))?n(new Error("已有该类别名称")):n()},a=function(t,a,n){""===a?n(new Error("请输入名称")):a.length>7?n(new Error("名称不应该过长")):e.data.some((function(e){return e.child.some((function(e){if(e.name===a)return!0}))}))?n(new Error("已有该菜品名称")):n()},n=function(e,t,a){/^\d+$/.test(t)?a():a(new Error("价格必须为正纯数字"))},o=function(e,t,a){""===t?a(new Error("请上传图片")):a()},i=function(t,a,n){if("规格"!==e.foodRuleForm.classes)n();else{console.log(a);var o=new Map;a.map((function(e){var t=!1;""!==e.title&&""!==e.choose||n(new Error("不应有选项组标题为空或未选默认项")),o.has(e.title)?n(new Error("不同选项组标题不可相同")):o.set(e.title,"");var a=new Map;e.option.map((function(o){""!==o.name&&""!==o.addprice||n(new Error("不应有选项或加价为空")),/^\d+$/.test(o.addprice)||n(new Error("加价必须为正纯数字")),a.has(o.name)?n(new Error("同一个选项组不应有相同选项")):a.set(o.name,""),o.name===e.choose&&(t=!0)})),!1===t&&n(new Error("请选择默认项"))})),n()}},r=function(t,a,n){if("套餐"!==e.foodRuleForm.classes)n();else{console.log(a);var o=new Map;a.map((function(e){""!==e.title&&""!==e.choose||n(new Error("不应有选项组标题为空或未选默认项")),o.has(e.title)?n(new Error("不同选项组标题不可相同")):o.set(e.title,"");new Map;e.option.map((function(e){""!==e.name&&""!==e.addprice||n(new Error("不应有选项或加价为空")),/^\d+$/.test(e.addprice)||n(new Error("加价必须为正纯数字"))}))})),n()}};return{saveLoading:!1,addFoodmaskClosable:!0,addFoodClosable:!0,lineRuleForm:{value:"",photoUrl:""},foodRuleForm:{name:"",value:"",price:"",describe:"",classes:"单品",photoUrl:"",specifications:[{title:"规格",choose:"中份",itemXuan:["大份","中份","小份"],option:[{name:"小份",addprice:0},{name:"中份",addprice:1},{name:"大份",addprice:2}]},{title:"熟度",choose:"全熟",itemXuan:["全熟","八分熟","五分熟"],option:[{name:"全熟",addprice:0},{name:"八分熟",addprice:0}]}],combo:[{title:"",choose:"",itemXuan:[],option:[{name:"",addprice:0},{name:"",addprice:10}]},{title:"",choose:"",itemXuan:[],option:[{name:"",addprice:0},{name:"",addprice:4}]}]},linerule:{value:[{required:!0,validator:t,trigger:"change"}],photoUrl:[{required:!0,validator:o,trigger:"blur"}]},foodrule:{value:[{required:!0,validator:a,trigger:"change"}],price:[{required:!0,validator:n,trigger:"change"}],describe:[{required:!0,trigger:"change"}],photoUrl:[{required:!0,validator:o,trigger:"blur"}],specifications:[{required:!0,validator:i,trigger:"blur"}],combo:[{required:!0,validator:r,trigger:"blur"}]},layout:{labelCol:{span:4},wrapperCol:{span:14}},addloading:!1,addLineVisible:!1,addFoodVisible:!1,tableLoading:!0,confirmLoading:!1,data:[{child:[{key:1}],key:2}],columns:_,innerColumns:F,editingKey:"",imageUrl:"",uploadUrl:"",cachedata:[],classesMap:new Map,comboMap:new Map}},watch:{foodRuleForm:{handler:function(e,t){"套餐"===e.name&&("套餐"!==e.classes&&this.$message.warn("套餐类别的类别必须为套餐"),e.classes="套餐")},deep:!0}},components:{OPTION:i["default"]},created:function(){this.getTable(),this.$notification.success({message:"温馨提示",description:"每行菜类左侧的加号可以点击展开",duration:10}),this.uploadUrl=s.a.devServer.proxy["/api"].target+"/test",this.classesMap.set("单品","item"),this.classesMap.set("套餐","combo"),this.classesMap.set("规格","size")},methods:{totalNameChange:function(){"套餐"!==this.foodRuleForm.name?this.foodRuleForm.classes="单品":this.foodRuleForm.classes="套餐"},guigeChange:function(e){"规格"===e.title?e.itemXuan=["大份","中份","小份"]:e.itemXuan=["全熟","八分熟","五分熟"],e.option.map((function(e){e.name=""}))},itemXuanChange:function(e){e.itemXuan=this.comboMap.get(e.title),e.option.map((function(e){e.name=""}))},loadData:function(e){var t=this;e.map((function(e){e.key=e.categoryName,e.name=e.categoryName,e.deleteLoading=!1,e.method={};var a=[];e.child.map((function(e){switch(a.push(e.itemName),e.key=e.itemName,e.name=e.itemName,e.describe=e.introduction,e.deleteLoading=!1,e.method={},e.classes){case"item":e.classes="单品";break;case"combo":e.classes="套餐";break;case"size":e.classes="规格";break}})),t.comboMap.set(e.name,a)})),e.map((function(e){e.child.map((function(e){e.combo.map((function(e){e.itemXuan=t.comboMap.get(e.title)})),e.specifications.map((function(e){"规格"===e.title?e.itemXuan=["大份","中份","小份"]:e.itemXuan=["全熟","八分熟","五分熟"]}))}))})),this.data=e,this.refreshCachedata(),this.tableLoading=!1},getTable:function(){var e=this;this.tableLoading=!0,u().then((function(t){e.loadData(t.data)}))},refreshCachedata:function(){this.cachedata=JSON.parse(JSON.stringify(this.data))},handleTchange:function(e,t,a){var n=b(this.data);t[a]=e,this.data=n},tedit:function(e){var t=b(this.data);this.editingKey=e.key,e.editable=!0,this.data=t},tsave:function(e){for(var t=b(this.data),a=Object.values(e),n="",o=0;o<a.length;o++){if(""===a[o]){console.log(a),n="不可有修改项为空！";break}0==o&&(e.hasOwnProperty("price")?t.map((function(t){t.child.map((function(t){t.name===e.name&&t.key!==e.key&&(n="第一项名称不可重复！"),e.name.length>9&&(n="名称不应该过长")}))})):t.map((function(t){t.name===e.name&&t.key!==e.key&&(n="第一项名称不可重复！"),e.name.length>9&&(n="名称不应该过长")})),e.hasOwnProperty("price")&&!/^\d+$/.test(e.price)&&(n="价格不可为负数且必须为数字！"))}if(""==n)if(e.categoryName){var i={categoryNo:e.categoryNo,categoryName:e.name,photoUrl:e.photoUrl};console.log(i),this.changeShare(v,i,e,t)}else{var r={price:e.price,introduction:e.introduction,itemName:e.name,itemNo:e.itemNo,photoUrl:e.photoUrl,classes:"单品"===e.classes?"item":"套餐"===e.classes?"combo":"size",itemList:"单品"===e.classes?[]:"套餐"===e.classes?e.combo:e.specifications};console.log(r),this.changeShare(m,r,e,t)}else this.$message.warn(n)},changeShare:function(e,t,a,n){var o=this;this.saveLoading=!0,e(t).then((function(){o.saveLoading=!1,o.$message.success("修改成功"),delete a.editable,o.data=n,o.refreshCachedata(),o.editingKey=""}))},tcancel:function(e){this.editingKey="",delete e.editable,this.data=JSON.parse(JSON.stringify(this.cachedata))},handleUrl:function(e,t){this.addloading=!0,"done"===e.file.status?(t.record?t.record.photoUrl=e.file.response:this[t.form].photoUrl=e.file.response,this.$message.success("".concat(e.file.name," 上传成功")),this.addloading=!1):"error"===e.file.status&&(this.$message.error("".concat(e.file.name," 上传失败.")),this.addloading=!1)},submitForm:function(e){var t=this;this.$refs[e].validate((function(a){if(!a)return console.log("添加失败"),!1;if(t.confirmLoading=!0,"lineRuleForm"===e)t.addLineVisible=!1,t.confirmLoading=!1,{key:t.lineRuleForm.value,id:t.lineRuleForm.value,name:t.lineRuleForm.value,categoryName:t.lineRuleForm.value,child:[],photoUrl:t.lineRuleForm.photoUrl},t.data,t.addfood({name:t.lineRuleForm.value},!0);else{var n={categoryName:t.foodRuleForm.name,itemName:t.foodRuleForm.value,price:parseInt(t.foodRuleForm.price),introduction:t.foodRuleForm.describe,photoUrl:t.foodRuleForm.photoUrl,classes:t.classesMap.get(t.foodRuleForm.classes),itemList:"单品"===t.foodRuleForm.classes?[]:"套餐"===t.foodRuleForm.classes?t.foodRuleForm.combo:t.foodRuleForm.specifications};!1===t.addFoodmaskClosable&&(console.log({photoUrl:t.lineRuleForm.photoUrl,categoryName:t.lineRuleForm.value}),h({photoUrl:t.lineRuleForm.photoUrl,categoryName:t.lineRuleForm.value})),setTimeout((function(){console.log(n),d(n).then((function(e){t.getTable()})),{key:t.foodRuleForm.value,id:t.foodRuleForm.value,name:t.foodRuleForm.value,price:t.foodRuleForm.price,describe:t.foodRuleForm.describe,photoUrl:t.foodRuleForm.photoUrl,classes:t.foodRuleForm.classes,combo:t.foodRuleForm.combo,specifications:t.foodRuleForm.specifications},t.data.some((function(e){if(e.name===t.foodRuleForm.name)return e.child,console.log(e.name),!0})),t.addFoodmaskClosable=!0,t.addFoodClosable=!0,t.$message.success("默认选项功能暂不可用，敬请期待"),t.$message.success("成功添加"),t.confirmLoading=!1,t.addLineVisible=!1,t.addFoodVisible=!1,t.$refs["foodRuleForm"]&&t.$refs["foodRuleForm"].resetFields(),t.$refs["lineRuleForm"]&&t.$refs["lineRuleForm"].resetFields()}),1)}}))},addfood:function(e,t){this.foodRuleForm.name=e.name,this.addFoodVisible=!0,t&&(this.addFoodmaskClosable=!1,this.addFoodClosable=!1)},handleCancel:function(){this.addLineVisible=!1,this.addFoodVisible=!1,this.$refs["foodRuleForm"]&&this.$refs["foodRuleForm"].resetFields(),this.$refs["lineRuleForm"]&&this.$refs["lineRuleForm"].resetFields()},onSearch:function(e){var t=this;this.tableLoading=!0,p({itemName:e}).then((function(e){t.tableLoading=!1,500!==e.code&&t.loadData(e.data)}))},reset:function(){this.getTable()},delete:function(){},deleteZuConfirm:function(e,t){e="套餐"==e?"combo":"specifications",1===this.foodRuleForm[e].length?this.$message.warn("至少要有一个选项组"):(this.foodRuleForm[e].splice(t,1),this.$message.success("成功删除"))},deleteXiangConfirm:function(e,t){2===e.length?this.$message.warn("至少要有2个选项"):(e.splice(t,1),this.$message.success("成功删除"))},addZu:function(e){e="套餐"==e?"combo":"specifications",this.foodRuleForm[e].push({title:"",choose:"",itemXuan:[],option:[{name:"",addprice:""},{name:"",addprice:""}]}),this.$message.success("成功添加,请向下划")},addXiang:function(e){e.push({name:"",addprice:""}),this.$message.success("成功添加,请向下划")},deletet:function(e){var t=this;e.deleteLoading=!0,e.categoryName?g({categoryName:e.categoryName}).then((function(a){t.$message.success("成功删除"),e.deleteLoading=!1,t.getTable()})):f({itemNo:e.itemNo}).then((function(a){t.$message.success("成功删除"),e.deleteLoading=!1,t.getTable()}))},comboSelect:function(e,t,a){var n=e.option.some((function(e){return e.name===t}));n?this.$message.warn("该选项组已经有该选项"):(e.choose=t,a.name=t)},changeOption:function(e){this.$refs.optionDetail.show(e)}}},S=O,R=(a("ca88"),a("2877")),A=Object(R["a"])(S,n,o,!1,null,"45d9e628",null);t["default"]=A.exports},"16c6":function(e,t,a){},"1ce4":function(e,t,a){},"1e4b":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"page-header-index-wide page-header-wrapper-grid-content-main"},[a("a-row",{attrs:{gutter:24}},[a("a-col",{attrs:{md:24,lg:7}},[a("a-card",{staticStyle:{"border-radius":"15px"},attrs:{bordered:!1}},[a("div",{staticClass:"account-center-avatarHolder"},[a("div",{staticClass:"avatar"},[a("img",{attrs:{src:e.avatar()}})]),a("div",{staticClass:"username"},[e._v(e._s(e.username()))]),a("div",{staticClass:"bio"},[e._v("用心烹饪一顿好西餐")])]),a("div",{staticClass:"account-center-detail"},[a("p",[a("i",{staticClass:"group"}),e._v(e._s(e.userInfo().roles)+" ")])]),a("a-divider")],1)],1),a("a-col",{attrs:{md:24,lg:17}},[a("a-card",{staticStyle:{width:"100%","border-radius":"15px"},attrs:{bordered:!1,tabList:e.tabListNoTitle,activeTabKey:e.noTitleKey},on:{tabChange:function(t){return e.handleTabChange(t,"noTitleKey")}}},["article"===e.noTitleKey||"app"===e.noTitleKey?a("div",[e._v("暂无数据")]):e._e()])],1)],1)],1)},o=[],i=a("2f62");function r(e){return u(e)||l(e)||c(e)||s()}function s(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function c(e,t){if(e){if("string"===typeof e)return d(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);return"Object"===a&&e.constructor&&(a=e.constructor.name),"Map"===a||"Set"===a?Array.from(e):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?d(e,t):void 0}}function l(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function u(e){if(Array.isArray(e))return d(e)}function d(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,n=new Array(t);a<t;a++)n[a]=e[a];return n}function m(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function f(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?m(Object(a),!0).forEach((function(t){p(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):m(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function p(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var h={data:function(){return{tabListNoTitle:[{key:"article",tab:"任务(0)"},{key:"app",tab:"提醒(0)"}],noTitleKey:"app"}},methods:f(f({},Object(i["c"])(["username","avatar","userInfo"])),{},{getAvatar:function(){return getFileAccessHttpUrl(this.avatar())},handleTabChange:function(e,t){this[t]=e},handleTagClose:function(e){var t=this.tags.filter((function(t){return t!=e}));this.tags=t},showTagInput:function(){var e=this;this.tagInputVisible=!0,this.$nextTick((function(){e.$refs.tagInput.focus()}))},handleInputChange:function(e){this.tagInputValue=e.target.value},handleTagInputConfirm:function(){var e=this.tagInputValue,t=this.tags;e&&-1===t.indexOf(e)&&(t=[].concat(r(t),[e])),Object.assign(this,{tags:t,tagInputVisible:!1,tagInputValue:""})}})},g=h,v=(a("9160"),a("2877")),b=Object(v["a"])(g,n,o,!1,null,"5090b995",null);t["default"]=b.exports},"255d":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"outter"},[a("div",{staticClass:"buttonsearch"},[a("a-button",{attrs:{type:"primary"},on:{click:function(t){e.addVisible=!0}}},[a("a-icon",{attrs:{type:"plus-circle"}}),e._v("新增管理人员")],1),a("div",{staticClass:"searchout"},[a("a-button",{attrs:{type:"dashed"},on:{click:e.reset}},[e._v("重置")]),a("a-input-search",{staticStyle:{width:"88%"},attrs:{placeholder:"搜索管理人员","enter-button":""},on:{search:e.onSearch}})],1)],1),a("div",{staticStyle:{height:"450px",overflow:"scroll"}},[a("a-table",{attrs:{columns:e.columns,pagination:!1,"data-source":e.data,bordered:"",tableLayout:"fixed",loading:e.tableLoading,defaultExpandAllRows:!0},scopedSlots:e._u([e._l(["name","phone","email"],(function(t){return{key:t,fn:function(n,o){return[a("div",{key:t},[o.editable?a("a-input",{staticStyle:{margin:"-5px 0"},attrs:{value:n},on:{change:function(a){return e.handleTchange(a.target.value,o,t)}}}):[e._v(" "+e._s(n)+" ")]],2)]}}})),{key:"method",fn:function(t,n){return[a("div",{staticClass:"editable-row-operations"},[n.editable?a("span",[a("a-button",{attrs:{loading:n.saveloading,type:"primary"},on:{click:function(){return e.tsave(n)}}},[e._v("保存")]),a("a-divider",{attrs:{type:"vertical"}}),a("a-button",{on:{click:function(){return e.tcancel(n)}}},[e._v("取消")]),a("a-divider",{attrs:{type:"vertical"}}),a("a-button",{attrs:{type:"dashed",loading:e.resetPasswordLoading},on:{click:function(){return e.resetPassword(n)}}},[e._v("重置密码")])],1):a("span",[a("a-button",{attrs:{disabled:""!==e.editingKey,type:"primary"},on:{click:function(){return e.tedit(n)}}},[e._v("修改")]),a("a-divider",{attrs:{type:"vertical"}}),a("a-popconfirm",{attrs:{disabled:""!==e.editingKey,title:"确定删除吗？"},on:{confirm:function(){return e.deletet(n)}}},[a("a-button",{attrs:{disabled:""!==e.editingKey,type:"danger",loading:n.deleloading}},[e._v(" 删除 ")])],1)],1)])]}},{key:"role",fn:function(t,n){return[a("div",{staticClass:"editable-row-operations"},[n.editable?a("span",[a("a-select",{staticStyle:{width:"120px"},attrs:{"default-value":n.role},on:{change:function(t){e.selectChange(t,n)}}},[a("a-select-option",{attrs:{value:"经理"}},[e._v(" 经理 ")]),a("a-select-option",{attrs:{value:"服务员"}},[e._v(" 服务员 ")]),a("a-select-option",{attrs:{value:"大厨"}},[e._v(" 大厨 ")])],1)],1):a("span",[e._v(" "+e._s(n.role)+" ")])])]}},{key:"avatarUrl",fn:function(t,n){return[n.editable?a("span",[a("a-upload",{attrs:{name:"file",multiple:!0,accept:"image/*",data:function(e){return{photo:e}},action:e.uploadUrl,"show-upload-list":!1},on:{change:function(t){e.handleUrl(t,n)}}},[e.addloading?a("div",[a("a-icon",{attrs:{type:"loading"}})],1):a("a",{staticClass:"uploadimage",attrs:{href:"javascript:;"}},[a("img",{staticStyle:{height:"40px",width:"40px","border-radius":"10px"},attrs:{src:n.avatarUrl,alt:""}}),a("div",{staticClass:"zhezhao"},[e._v("修改")])])])],1):a("span",[a("img",{staticStyle:{height:"40px",width:"40px","border-radius":"10px"},attrs:{src:n.avatarUrl,alt:""}})])]}},{key:"child",fn:function(t,n){return a("span",{},[e._v(e._s(n.child.length))])}}],null,!0)})],1),a("a-modal",{attrs:{title:"添加管理人员",visible:e.addVisible,"confirm-loading":e.confirmLoading,okText:"确认",cancelText:"取消"},on:{ok:function(t){return e.submitForm("RuleForm")},cancel:e.handleCancel}},[a("a-form-model",e._b({ref:"RuleForm",attrs:{model:e.RuleForm,rules:e.rule}},"a-form-model",e.layout,!1),[a("a-form-model-item",{attrs:{"has-feedback":"",label:"姓名",prop:"name"}},[a("a-input",{attrs:{autocomplete:"off"},model:{value:e.RuleForm.name,callback:function(t){e.$set(e.RuleForm,"name",t)},expression:"RuleForm.name"}})],1),a("a-form-model-item",{attrs:{"has-feedback":"",label:"账号",prop:"username"}},[a("a-input",{attrs:{autocomplete:"off"},model:{value:e.RuleForm.username,callback:function(t){e.$set(e.RuleForm,"username",t)},expression:"RuleForm.username"}})],1),a("a-form-model-item",{attrs:{"has-feedback":"",label:"手机号",prop:"phone"}},[a("a-input",{attrs:{autocomplete:"off"},model:{value:e.RuleForm.phone,callback:function(t){e.$set(e.RuleForm,"phone",t)},expression:"RuleForm.phone"}})],1),a("a-form-model-item",{attrs:{"has-feedback":"",label:"邮箱账号",prop:"email"}},[a("a-input",{attrs:{autocomplete:"off"},model:{value:e.RuleForm.email,callback:function(t){e.$set(e.RuleForm,"email",t)},expression:"RuleForm.email"}})],1),a("a-form-model-item",{attrs:{"has-feedback":"",label:"权限",prop:"role"}},[a("a-select",{staticStyle:{width:"120px"},attrs:{"default-value":"经理"},on:{change:function(t){e.RuleForm.role=t}}},[a("a-select-option",{attrs:{value:"经理"}},[e._v(" 经理 ")]),a("a-select-option",{attrs:{value:"服务员"}},[e._v(" 服务员 ")]),a("a-select-option",{attrs:{value:"大厨"}},[e._v(" 大厨 ")])],1)],1),a("a-form-model-item",{attrs:{"has-feedback":"",label:"头像",prop:"avatarUrl"}},[a("a-upload",{staticClass:"avatar-uploader",attrs:{name:"avatar","list-type":"picture-card","show-upload-list":!1,accept:"image/*",data:function(e){return{photo:e}},action:e.uploadUrl},on:{change:e.handleUrl}},[e.RuleForm.avatarUrl?a("img",{staticStyle:{width:"128px",height:"128px"},attrs:{src:e.RuleForm.avatarUrl,alt:"avatar"}}):a("div",[a("a-icon",{attrs:{type:e.addloading?"loading":"plus"}}),a("div",{staticClass:"ant-upload-text"},[e._v("上传")])],1)])],1)],1)],1)],1)},o=[],i=a("5f35"),r=a.n(i),s=a("b775"),c={userGet:"/admin/all-user-info",userChange:"/admin/admin-userinfo",searchUser:"/admin/searchUser",deleteUserinfo:"/admin/userinfo",addUser:"/admin/userinfo",resetUserPassword:"/admin/reset-password"};function l(){return Object(s["a"])({url:c.userGet,method:"get"})}function u(e){return Object(s["a"])({url:c.userChange,method:"put",data:e})}function d(e){return Object(s["a"])({url:c.deleteUserinfo,method:"delete",params:e})}function m(e){return Object(s["a"])({url:c.searchUser,method:"get",params:e})}function f(e){return Object(s["a"])({url:c.addUser,method:"post",data:e})}function p(e){return console.log(e),Object(s["a"])({url:c.resetUserPassword,method:"put",params:e})}function h(e){return y(e)||b(e)||v(e)||g()}function g(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function v(e,t){if(e){if("string"===typeof e)return w(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);return"Object"===a&&e.constructor&&(a=e.constructor.name),"Map"===a||"Set"===a?Array.from(e):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?w(e,t):void 0}}function b(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function y(e){if(Array.isArray(e))return w(e)}function w(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,n=new Array(t);a<t;a++)n[a]=e[a];return n}var k=[{title:"管理员姓名",dataIndex:"name",width:"10%",align:"center",scopedSlots:{customRender:"name"}},{title:"管理员账号",dataIndex:"username",width:"8%",align:"center",scopedSlots:{customRender:"username"}},{title:"手机号",dataIndex:"phone",width:"9%",align:"center",ellipsis:!0,scopedSlots:{customRender:"phone"}},{title:"邮箱账号",dataIndex:"email",width:"14%",align:"center",ellipsis:!0,scopedSlots:{customRender:"email"}},{title:"头像",dataIndex:"avatarUrl",width:"10%",align:"center",ellipsis:!0,scopedSlots:{customRender:"avatarUrl"}},{title:"权限身份",dataIndex:"role",width:"13%",align:"center",ellipsis:!0,scopedSlots:{customRender:"role"}},{title:"操作",dataIndex:"method",align:"center",scopedSlots:{customRender:"method"}}],C={data:function(){var e=this,t=function(e,t,a){""===t?a(new Error("请输入账号")):a()},a=function(t,a,n){""===a?n(new Error("请输入账号")):a.length>13?n(new Error("账号不应该过长")):e.data.some((function(e){return e.username==a}))?n(new Error("账号已存在")):n()},n=function(e,t,a){""===t?a(new Error("请输入初始密码")):a()},o=function(e,t,a){/^\d+$/.test(t)?a():a(new Error("手机号必须为正纯数字"))},i=function(e,t,a){/^(\w-*\.*)+@(\w-?)+(\.\w{2,})+$/.test(t)?a():a(new Error("邮箱格式错误"))},r=function(e,t,a){""===t?a(new Error("请上传图片")):a()};return{RuleForm:{name:"",username:"",password:"",phone:"",email:"",role:"经理",avatarUrl:""},rule:{name:[{required:!0,validator:t,trigger:"change"}],username:[{required:!0,validator:a,trigger:"change"}],password:[{required:!0,validator:n,trigger:"change"}],phone:[{required:!0,validator:o,trigger:"change"}],email:[{required:!0,validator:i,trigger:"change"}],avatarUrl:[{required:!0,validator:r,trigger:"blur"}]},layout:{labelCol:{span:4},wrapperCol:{span:14}},resetPasswordLoading:!1,addloading:!1,addVisible:!1,tableLoading:!1,confirmLoading:!1,data:[],columns:k,editingKey:"",cachedata:[],uploadUrl:""}},mounted:function(){this.aboutPerson(l),this.uploadUrl=r.a.devServer.proxy["/api"].target+"/test"},methods:{onSearch:function(e){this.aboutPerson(m,{name:e})},aboutPerson:function(e,t){var a=this;this.tableLoading=!0;var n=0;e(t).then((function(e){e.data.map((function(e){e.key=n++,e.role=e.roles[0],e.deleloading=!1,e.saveloading=!1})),a.data=e.data,a.tableLoading=!1,a.refreshCachedata()}))},refreshCachedata:function(){this.cachedata=JSON.parse(JSON.stringify(this.data))},handleTchange:function(e,t,a){var n=h(this.data);t[a]=e,this.data=n},tedit:function(e){var t=h(this.data);this.editingKey=e.key,console.log(this.editingKey),e.editable=!0,this.data=t},tsave:function(e){for(var t=this,a=h(this.data),n=Object.values(e),o="",i=0;i<n.length;i++){if(""===n[i]&&2!=i){console.log(n),o="不可有修改项为空！";break}e.hasOwnProperty("phone")&&!/^\d+$/.test(e.phone)&&(o="手机号必须为数字"),e.hasOwnProperty("email")&&!/^(\w-*\.*)+@(\w-?)+(\.\w{2,})+$/.test(e.email)&&(o="邮箱格式错误")}if(""==o){var r={name:this.data[this.editingKey].name,roles:[this.data[this.editingKey].role],username:this.data[this.editingKey].username,phone:this.data[this.editingKey].phone,avatarUrl:this.data[this.editingKey].avatarUrl,email:this.data[this.editingKey].email};console.log(r),e.saveloading=!0,u(r).then((function(n){e.saveloading=!1,delete e.editable,t.data=a,t.refreshCachedata(),t.editingKey=""}))}else this.$message.warn(o)},tcancel:function(e){this.editingKey="",delete e.editable,this.data=JSON.parse(JSON.stringify(this.cachedata))},handleUrl:function(e,t){this.addloading=!0,"done"===e.file.status?(t?t.avatarUrl=e.file.response:this.RuleForm.avatarUrl=e.file.response,this.$message.success("".concat(e.file.name," 上传成功")),this.addloading=!1):"error"===e.file.status&&(this.$message.error("".concat(e.file.name," 上传失败.")),this.addloading=!1)},submitForm:function(e){var t,a=this;t={name:this.RuleForm.name,username:this.RuleForm.username,phone:this.RuleForm.phone,password:this.RuleForm.password,avatarUrl:this.RuleForm.avatarUrl,roles:[this.RuleForm.role],email:this.RuleForm.email},this.$refs[e].validate((function(n){if(!n)return console.log("添加失败"),!1;a.confirmLoading=!0,f(t).then((function(t){a.aboutPerson(l),a.$message.success("成功添加"),a.confirmLoading=!1,a.addVisible=!1,a.addFoodVisible=!1,a.$refs[e].resetFields()}))}))},handleCancel:function(){this.addVisible=!1},selectChange:function(e,t){t.role=e},reset:function(){this.aboutPerson(l)},deletet:function(e){var t=this;e.deleloading=!0,d({username:e.username}).then((function(a){e.deleloading=!1,t.aboutPerson(l)}))},resetPassword:function(e){var t=this;this.resetPasswordLoading=!0,p({username:e.username}).then((function(e){t.resetPasswordLoading=!1,t.$message.success("密码重置为123456")}))}}},x=C,_=(a("62a0"),a("2877")),F=Object(_["a"])(x,n,o,!1,null,"08db1aea",null);t["default"]=F.exports},3677:function(e,t,a){"use strict";a("9c72")},"37fc":function(e,t,a){},"3e7f":function(e,t,a){"use strict";a("82f5")},4214:function(e,t,a){},"4f4f":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"outter"},[a("div",{staticClass:"bottonheader"},[a("div",{staticClass:"buttons"},[a("a-button",{attrs:{type:"primary",disabled:!e.hasSelectedOpen,loading:e.loading},on:{click:function(t){return e.domore("open")}}},[e._v(" 开台 ")]),a("a-button",{attrs:{type:"dashed",disabled:!e.hasSelectedOther,loading:e.loading},on:{click:function(t){return e.domore("reset")}}},[e._v(" 置空 ")]),a("a-button",{attrs:{type:"primary",disabled:!e.hasSelected,loading:e.loading},on:{click:function(t){return e.domore("close")}}},[e._v(" 关台 ")]),a("a-button",{attrs:{type:"danger",disabled:!e.hasSelected,loading:e.loading},on:{click:function(t){return e.domore("deletet")}}},[e._v(" 删除 ")])],1),a("a-button",{attrs:{loading:e.loading},on:{click:function(t){e.addvisible=!0}}},[e._v(" 添加桌台 ")])],1),a("div",{staticStyle:{height:"450px",overflow:"scroll"}},[a("a-table",{attrs:{"row-selection":{selectedRowKeys:e.selectedRowKeys,onChange:e.onSelectChange},columns:e.columns,pagination:!1,"data-source":e.data,bordered:"",fixed:!0,loading:e.tableLoading},scopedSlots:e._u([{key:"state",fn:function(t){return a("span",{},[a("a-tag",{attrs:{color:t.color}},[e._v(e._s(t.text))])],1)}},{key:"method",fn:function(t,n){return a("span",{},[t.onOrNo?a("a-button",{attrs:{loading:t.onOrNoLoading,size:"small",type:"primary"},on:{click:function(t){return e.close(n)}}},[e._v(" 关台 ")]):a("a-button",{attrs:{loading:t.onOrNoLoading,size:"small",type:"primary"},on:{click:function(t){return e.open(n)}}},[e._v(" 开台 ")]),a("a-divider",{attrs:{type:"vertical"}}),a("a-button",{attrs:{loading:t.resetLoading,disabled:"使用中"!==n.state.text,size:"small",type:"dashed"},on:{click:function(t){return e.reset(n)}}},[e._v(" 置空 ")]),a("a-divider",{attrs:{type:"vertical"}}),a("a-button",{attrs:{loading:t.deleteLoading,size:"small",type:"danger"},on:{click:function(t){return e.deletet(n)}}},[e._v(" 删除 ")])],1)}},{key:"filterDropdown",fn:function(t){var n=t.setSelectedKeys,o=t.selectedKeys,i=t.confirm,r=t.clearFilters,s=t.column;return a("div",{staticStyle:{padding:"8px"}},[a("a-input",{directives:[{name:"ant-ref",rawName:"v-ant-ref",value:function(t){return e.searchInput=t},expression:"(c) => (searchInput = c)"}],staticStyle:{width:"188px","margin-bottom":"8px",display:"block"},attrs:{placeholder:"查找桌号",value:o[0]},on:{change:function(e){return n(e.target.value?[e.target.value]:[])},pressEnter:function(){return e.handleSearch(o,i,s.dataIndex)}}}),a("a-button",{staticStyle:{width:"90px","margin-right":"8px"},attrs:{type:"primary",icon:"search",size:"small"},on:{click:function(){return e.handleSearch(o,i,s.dataIndex)}}},[e._v(" 查找 ")]),a("a-button",{staticStyle:{width:"90px"},attrs:{size:"small"},on:{click:function(){return e.handleReset(r)}}},[e._v(" 重置 ")])],1)}},{key:"filterIcon",fn:function(e){return a("a-icon",{style:{color:e?"#108ee9":void 0},attrs:{type:"search"}})}},{key:"customRender",fn:function(t,n,o,i){return[e.searchText&&e.searchedColumn===i.dataIndex?a("span",[e._l(t.toString().split(new RegExp("(?<="+e.searchText+")|(?="+e.searchText+")","i")),(function(t,n){return[t.toLowerCase()===e.searchText.toLowerCase()?a("mark",{key:n,staticClass:"highlight"},[e._v(e._s(t))]):[e._v(e._s(t))]]}))],2):[e._v(" "+e._s(t)+" ")]]}}])})],1),a("a-modal",{attrs:{title:"添加桌台",visible:e.addvisible,"confirm-loading":e.confirmLoading,okText:"确认",cancelText:"取消"},on:{ok:function(t){return e.submitForm("ruleForm")},cancel:e.handleCancel}},[a("a-form-model",e._b({ref:"ruleForm",attrs:{model:e.ruleForm,rules:e.rules}},"a-form-model",e.layout,!1),[a("a-form-model-item",{attrs:{"has-feedback":"",label:"桌号",prop:"value"}},[a("a-input",{attrs:{autocomplete:"off"},model:{value:e.ruleForm.value,callback:function(t){e.$set(e.ruleForm,"value",t)},expression:"ruleForm.value"}})],1),a("a-form-model-item",{attrs:{label:"大小",prop:"resource"}},[a("a-radio-group",{model:{value:e.ruleForm.resource,callback:function(t){e.$set(e.ruleForm,"resource",t)},expression:"ruleForm.resource"}},[a("a-radio",{attrs:{value:"大桌"}},[e._v(" 大桌 ")]),a("a-radio",{attrs:{value:"中桌"}},[e._v(" 中桌 ")])],1)],1)],1)],1)],1)},o=[],i=a("b775"),r={getAllTable:"/admin/table",updateTalbeState:"/admin/table",addTable:"/admin/table",deleteTable:"/admin/table"};function s(){return Object(i["a"])({url:r.getAllTable,method:"get"})}function c(e){return Object(i["a"])({url:r.updateTalbeState,method:"put",data:e})}function l(e){return Object(i["a"])({url:r.addTable,method:"post",data:e})}function u(e){return Object(i["a"])({url:r.deleteTable,method:"delete",params:e})}var d=void 0,m=[{title:"桌号",dataIndex:"name",width:"20%",align:"center",scopedSlots:{filterDropdown:"filterDropdown",filterIcon:"filterIcon",customRender:"customRender"},onFilter:function(e,t){return t.name.toString().toLowerCase().includes(e.toLowerCase())},onFilterDropdownVisibleChange:function(e){e&&setTimeout((function(){d.searchInput.focus()}),0)}},{title:"大小",dataIndex:"size",align:"center",width:"15%",filters:[{text:"中桌",value:"中桌"},{text:"大桌",value:"大桌"}],onFilter:function(e,t){return 0===t.size.indexOf(e)}},{title:"状态",dataIndex:"state",width:"20%",scopedSlots:{customRender:"state"},align:"center",filters:[{text:"使用中",value:"使用中"},{text:"可使用",value:"可使用"},{text:"已停用",value:"已停用"}],onFilter:function(e,t){return 0===t.state.text.indexOf(e)}},{title:"操作",dataIndex:"method",align:"center",scopedSlots:{customRender:"method"}}],f={data:function(){var e=this,t=function(t,a,n){""===a?n(new Error("请输入桌号")):a.length>3?n(new Error("桌号不应该过长")):e.data.some((function(e){return e.name.slice(1)==a}))?n(new Error("已有该桌号")):/[0-9]/.test(a)?n():n(new Error("桌号应该包含数字"))};return{ruleForm:{value:"",resource:""},rules:{value:[{required:!0,validator:t,trigger:"change"}],resource:[{required:!0,message:"请选择桌号大小",trigger:"change"}]},layout:{labelCol:{span:4},wrapperCol:{span:14}},addvisible:!1,confirmLoading:!1,data:[],columns:m,selectedRowKeys:[],loading:!1,searchText:"",tableLoading:!1}},created:function(){this.initWebSocket(),this.getData()},computed:{hasSelected:function(){return this.selectedRowKeys.length>0},hasSelectedOther:function(){var e=this;if(0===this.selectedRowKeys.length)return!1;var t=!0;return this.data.map((function(a){if(0!=t)for(var n=0;n<e.selectedRowKeys.length;n++)if(a.key===e.selectedRowKeys[n]){if("使用中"!=a.state.text){t=!1;break}t=!0}})),t},hasSelectedOpen:function(){var e=this;if(0===this.selectedRowKeys.length)return!1;var t=!0;return this.data.map((function(a){if(0!=t)for(var n=0;n<e.selectedRowKeys.length;n++)if(a.key===e.selectedRowKeys[n]){if("已停用"!=a.state.text){t=!1;break}t=!0}})),t}},methods:{getData:function(){var e=this;this.tableLoading=!0,s().then((function(t){t.data.map((function(e){e.name=e.seatNo,e.state=e.state[0],e.method=e.method[0]})),e.data=t.data,e.tableLoading=!1}))},initWebSocket:function(){var e="wss://miswestrestaurant.xyz/websocket";this.websock=new WebSocket(e),this.websock.onopen=this.websocketonopen,this.websock.onerror=this.websocketonerror,this.websock.onmessage=this.websocketonmessage,this.websock.onclose=this.websocketclose},websocketonopen:function(){console.log("WebSocket连接成功")},websocketonerror:function(e){console.log("WebSocket连接发生错误")},websocketonmessage:function(e,t){console.log("WebSocket接受消息"),console.log(e),this.getData()},destroyed:function(){this.websocketclose()},domore:function(e){var t=this;this.$confirm({title:"提示",content:"该操作仅会对选中且满足该操作条件的项进行处理，请问是否继续?",okText:"确认",cancelText:"取消",onOk:function(){t.data.map((function(a){for(var n=0;n<t.selectedRowKeys.length;n++)a.key===t.selectedRowKeys[n]&&t[e](a)}))},onCancel:function(){}})},handleCancel:function(){this.addvisible=!1},submitForm:function(e){var t=this;this.$refs[e].validate((function(e){if(!e)return console.log("error submit!!"),!1;t.confirmLoading=!0,l({size:"大桌"===t.ruleForm.resource?1:2,seatNo:t.ruleForm.value}).then((function(e){200===e.code&&(t.confirmLoading=!1,t.data.push({key:t.ruleForm.value,name:("大桌"===t.ruleForm.resource?"A":"B")+t.ruleForm.value,size:t.ruleForm.resource,state:{color:"grey",text:"已停用"},method:{onOrNo:!1,onOrNoLoading:!1,resetLoading:!1,deleteLoading:!1}}),t.$message.success("成功添加"),t.addvisible=!1)}))}))},open:function(e){e.method.onOrNoLoading=!0,c({keys:[e.name],state:0}).then((function(t){200===t.code&&(e.method.onOrNoLoading=!1,e.state={color:"green",text:"可使用"},e.method.onOrNo=!0)}))},close:function(e){e.method.onOrNoLoading=!0,c({keys:[e.name],state:-1}).then((function(t){200===t.code&&(e.method.onOrNoLoading=!1,e.state={color:"grey",text:"已停用"},e.method.onOrNo=!1)}))},reset:function(e){e.method.resetLoading=!0,c({keys:[e.name],state:0}).then((function(t){200===t.code&&(e.method.resetLoading=!1,e.state={color:"green",text:"可使用"},e.method.onOrNo=!0)}))},deletet:function(e){var t=this;e.method.deleteLoading=!0,u({seatNo:e.name}).then((function(a){200===a.code&&(e.method.resetLoading=!1,t.data=t.data.filter((function(t){return t.key!==e.key})))}))},onSelectChange:function(e){this.selectedRowKeys=e},handleSearch:function(e,t,a){t(),this.searchText=e[0],this.searchedColumn=a},handleReset:function(e){e(),this.searchText=""}}},p=f,h=(a("1637"),a("2877")),g=Object(h["a"])(p,n,o,!1,null,"645f44f4",null);t["default"]=g.exports},5957:function(e,t,a){},"5f35":function(e,t,a){(function(t){var n=a("df7c");function o(e){return n.join(t,e)}e.exports={productionSourceMap:!1,chainWebpack:function(e){e.resolve.alias.set("@$",o("src")).set("@api",o("src/api")).set("@assets",o("src/assets")).set("@comp",o("src/components")).set("@views",o("src/views")),e.module.rule("markdown").test(/\.md$/).use().loader("file-loader").end()},css:{loaderOptions:{less:{modifyVars:{"primary-color":"#2c2c2c","link-color":"rgb(49, 70, 89)","border-color-base":"#d9d9d9","border-radius-base":"4px"},javascriptEnabled:!0}}},lintOnSave:!1,devServer:{port:3e3,proxy:{"":{target:"https://miswestrestaurant.xyz",ws:!1,changeOrigin:!0,pathRewrite:{"":""}}}}}}).call(this,"/")},"62a0":function(e,t,a){"use strict";a("1ce4")},6772:function(e,t,a){},"692e":function(e,t,a){var n={"./App.vue":"3dfd","./components/FlyTagAndContent.vue":"e064","./components/GlobalFooter.vue":"5b9f","./components/GlobalHeader/GlobalHeader.vue":"998e","./components/GlobalHeader/UserMenu.vue":"0835","./components/GlobalHeader/updatePassword.vue":"f5b4","./components/alltab.vue":"e906","./components/contextmenu.vue":"b3d2","./components/foodItem.vue":"6e1b","./components/guige.vue":"f7de","./components/logo.vue":"15da","./components/optionDetail.vue":"7417","./components/sidemenu/sidemenu.vue":"5a23","./layouts/GlobalLayout.vue":"52941","./layouts/UserBase.vue":"a1ed","./views/UserForgetPassword/Step2.vue":"7763","./views/UserForgetPassword/Step3.vue":"a4ce","./views/UserForgetPassword/Step4.vue":"cd2d","./views/UserForgetPassword/UserForgetPassword.vue":"0dfc","./views/business/charCheck.vue":"9d8d","./views/business/foodBuy.vue":"c82c","./views/business/foodManage.vue":"16be","./views/business/orderManage.vue":"8375","./views/business/personManage.vue":"255d","./views/business/tableManage.vue":"4f4f","./views/exception/403.vue":"e409","./views/exception/404.vue":"cc89","./views/exception/500.vue":"6c05","./views/exception/ExceptionPage.vue":"0673","./views/index.vue":"1e4b","./views/result/Result.vue":"9a3d","./views/user/Login.vue":"ac2a","./views/user/LoginAccount.vue":"a175"};function o(e){var t=i(e);return a(t)}function i(e){if(!a.o(n,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return n[e]}o.keys=function(){return Object.keys(n)},o.resolve=i,e.exports=o,o.id="692e"},"6c05":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("exception-page",{attrs:{type:"500"}})},o=[],i=a("0673"),r={components:{ExceptionPage:i["default"]}},s=r,c=a("2877"),l=Object(c["a"])(s,n,o,!1,null,"58acec66",null);t["default"]=l.exports},"6d93":function(e,t,a){"use strict";a("9b2b")},"6e06":function(e,t,a){"use strict";a("9103")},"6e1b":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"one"},[a("div",{staticClass:"onetop"},[a("img",{staticClass:"oneimage",attrs:{src:e.item.photoUrl,alt:""}}),a("div",{staticClass:"text"},[a("div",{staticClass:"onetitle"},[e._v(e._s(e.item.itemName))]),a("dir",{staticClass:"onedescribe"},[e._v(" "+e._s(e.item.introduction)+" ")])],1)]),a("div",{staticClass:"onebottom"},[a("div",{staticClass:"price"},[e._v("￥"+e._s(e.item.price))]),e._t("method")],2)])},o=[],i={props:{item:{type:Object,default:{}}}},r=i,s=(a("a82b"),a("2877")),c=Object(s["a"])(r,n,o,!1,null,"28b93db6",null);t["default"]=c.exports},7131:function(e,t,a){"use strict";a("37fc")},7146:function(e,t,a){"use strict";a("ed9f")},7255:function(e,t,a){},7417:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("a-modal",{attrs:{width:700,title:"修改",visible:e.changeOptionVisible,"confirm-loading":e.confirmLoading,okText:"确认",cancelText:"取消"},on:{ok:e.submitForm,cancel:e.handleCancel}},[a("a-form-model",e._b({ref:"foodRuleForm",attrs:{model:e.foodRuleForm,rules:e.foodrule}},"a-form-model",e.layout,!1),[a("a-form-model-item",{attrs:{"has-feedback":"",label:"类别",prop:"classes"}},[a("a-select",{staticStyle:{width:"120px"},model:{value:e.foodRuleForm.classes,callback:function(t){e.$set(e.foodRuleForm,"classes",t)},expression:"foodRuleForm.classes"}},["规格"===e.foodRuleForm.classes||"单品"===e.foodRuleForm.classes?a("a-select-option",{attrs:{value:"规格"}},[e._v(" 规格 ")]):a("a-select-option",{attrs:{value:"套餐"}},[e._v(" 套餐 ")]),"规格"===e.foodRuleForm.classes||"单品"===e.foodRuleForm.classes?a("a-select-option",{attrs:{value:"单品"}},[e._v(" 单品 ")]):e._e()],1),"规格"===e.foodRuleForm.classes||"套餐"===e.foodRuleForm.classes?a("a-button",{attrs:{type:"dashed"},on:{click:function(t){return e.addZu(e.foodRuleForm.classes)}}},[e._v("增加选项组")]):e._e()],1),"规格"===e.foodRuleForm.classes?a("a-form-model-item",{attrs:{"has-feedback":"",label:"选项",prop:"specifications"}},e._l(e.foodRuleForm.specifications,(function(t,n){return a("div",{key:n,staticClass:"specificationsZu"},[a("div",[a("span",[e._v("选项组标题：")]),a("a-select",{staticStyle:{width:"120px"},on:{select:function(a){return e.guigeChange(t)}},model:{value:t.title,callback:function(a){e.$set(t,"title",a)},expression:"item.title"}},[a("a-select-option",{attrs:{value:"规格"}},[e._v(" 规格 ")]),a("a-select-option",{attrs:{value:"熟度"}},[e._v(" 熟度 ")])],1),a("a-button",{attrs:{type:"dashed"},on:{click:function(a){return e.addXiang(t.option)}}},[e._v("增加选项")])],1),a("span",[e._v("默认项：")]),a("a-radio-group",{attrs:{name:t.title},model:{value:t.choose,callback:function(a){e.$set(t,"choose",a)},expression:"item.choose"}},e._l(t.option,(function(t,n){return a("a-radio",{key:n,attrs:{value:t.name}},[e._v(" "+e._s(t.name)+" ")])})),1),a("a-divider"),e._l(t.option,(function(n,o){return a("div",{key:o},[a("span",{staticClass:"specifications"},[e._v("选项名称： "),0!==o?a("a-popconfirm",{staticClass:"deleteXiang",attrs:{title:"确定删除这个选项吗?","ok-text":"确定","cancel-text":"取消"},on:{confirm:function(a){return e.deleteXiangConfirm(t.option,o)}}},[a("a",{attrs:{href:"#"}},[a("a-icon",{staticClass:"smallicon",attrs:{type:"close"}})],1)]):e._e()],1),a("a-select",{staticStyle:{width:"30%"},attrs:{value:n.name},on:{change:function(a){e.comboSelect(t,a,n)}}},e._l(t.itemXuan,(function(t,n){return a("a-select-option",{key:n,attrs:{value:t}},[e._v(" "+e._s(t)+" ")])})),1),a("a-divider",{attrs:{type:"vertical"}}),"熟度"!==t.title&&0!==o?a("span",[e._v("加价：")]):e._e(),"熟度"!==t.title&&0!==o?a("a-input",{staticClass:"specificationsInput",attrs:{placeholder:"原价基础加钱",autocomplete:"off"},model:{value:n.addprice,callback:function(t){e.$set(n,"addprice",t)},expression:"i.addprice"}}):e._e()],1)})),a("a-popconfirm",{staticClass:"deleteZu",attrs:{title:"确定删除这个选项组吗?","ok-text":"确定","cancel-text":"取消"},on:{confirm:function(t){return e.deleteZuConfirm(e.foodRuleForm.classes,n)}}},[a("a",{attrs:{href:"#"}},[a("a-icon",{attrs:{type:"close"}})],1)])],2)})),0):e._e(),"套餐"===e.foodRuleForm.classes?a("a-form-model-item",{attrs:{"has-feedback":"",label:"选项组",prop:"combo"}},e._l(e.foodRuleForm.combo,(function(t,n){return a("div",{key:n,staticClass:"specificationsZu"},[a("div",[a("span",[e._v("选项组标题：")]),a("a-select",{staticStyle:{width:"120px"},on:{select:function(a){return e.itemXuanChange(t)}},model:{value:t.title,callback:function(a){e.$set(t,"title",a)},expression:"item.title"}},e._l(e.data,(function(t){return a("a-select-option",{key:t.key,attrs:{value:t.name}},[e._v(" "+e._s(t.name))])})),1),a("a-button",{attrs:{type:"dashed"},on:{click:function(a){return e.addXiang(t.option)}}},[e._v("增加选项")])],1),a("span",[e._v("默认项：")]),a("a-radio-group",{attrs:{name:t.title},model:{value:t.choose,callback:function(a){e.$set(t,"choose",a)},expression:"item.choose"}},e._l(t.option,(function(t,n){return a("a-radio",{key:n,attrs:{value:t.name}},[e._v(" "+e._s(t.name)+" ")])})),1),a("a-divider"),e._l(t.option,(function(n,o){return a("div",{key:o},[a("span",{staticClass:"specifications"},[e._v("选项名称： "),0!==o?a("a-popconfirm",{staticClass:"deleteXiang",attrs:{title:"确定删除这个选项吗?","ok-text":"确定","cancel-text":"取消"},on:{confirm:function(a){return e.deleteXiangConfirm(t.option,o)}}},[a("a",{attrs:{href:"#"}},[a("a-icon",{staticClass:"smallicon",attrs:{type:"close"}})],1)]):e._e()],1),a("a-select",{staticStyle:{width:"30%"},attrs:{value:n.name},on:{change:function(a){e.comboSelect(t,a,n)}}},e._l(t.itemXuan,(function(t,n){return a("a-select-option",{key:n,attrs:{value:t}},[e._v(" "+e._s(t)+" ")])})),1),a("a-divider",{attrs:{type:"vertical"}}),"熟度"!==t.title&&0!==o?a("span",[e._v("加价：")]):e._e(),"熟度"!==t.title&&0!==o?a("a-input",{staticClass:"specificationsInput",attrs:{placeholder:"原价基础加钱",autocomplete:"off"},model:{value:n.addprice,callback:function(t){e.$set(n,"addprice",t)},expression:"i.addprice"}}):e._e()],1)})),a("a-popconfirm",{staticClass:"deleteZu",attrs:{title:"确定删除这个选项组吗?","ok-text":"确定","cancel-text":"取消"},on:{confirm:function(t){return e.deleteZuConfirm(e.foodRuleForm.classes,n)}}},[a("a",{attrs:{href:"#"}},[a("a-icon",{attrs:{type:"close"}})],1)])],2)})),0):e._e()],1)],1)},o=[],i={props:["data","comboMap"],data:function(){var e=this,t=function(t,a,n){if("规格"!==e.foodRuleForm.classes)n();else{console.log(a);var o=new Map;a.map((function(e){var t=!1;""!==e.title&&""!==e.choose||n(new Error("不应有选项组标题为空或未选默认项")),o.has(e.title)?n(new Error("不同选项组标题不可相同")):o.set(e.title,"");var a=new Map;e.option.map((function(o){""!==o.name&&""!==o.addprice||n(new Error("不应有选项或加价为空")),/^\d+$/.test(o.addprice)||n(new Error("加价必须为正纯数字")),a.has(o.name)?n(new Error("同一个选项组不应有相同选项")):a.set(o.name,""),o.name===e.choose&&(t=!0)})),!1===t&&n(new Error("请选择默认项"))})),n()}},a=function(t,a,n){if("套餐"!==e.foodRuleForm.classes)n();else{console.log(a);var o=new Map;a.map((function(e){""!==e.title&&""!==e.choose||n(new Error("不应有选项组标题为空或未选默认项")),o.has(e.title)?n(new Error("不同选项组标题不可相同")):o.set(e.title,"");new Map;e.option.map((function(e){""!==e.name&&""!==e.addprice||n(new Error("不应有选项或加价为空")),/^\d+$/.test(e.addprice)||n(new Error("加价必须为正纯数字"))}))})),n()}};return{record:[],layout:{labelCol:{span:4},wrapperCol:{span:14}},foodRuleForm:{classes:"规格",specifications:[{title:"规格",choose:"中份",itemXuan:["大份","中份","小份"],option:[{name:"小份",addprice:0},{name:"中份",addprice:1},{name:"小份",addprice:2}]},{title:"熟度",choose:"全熟",itemXuan:["全熟","八分熟","五分熟"],option:[{name:"全熟",addprice:0},{name:"七成熟",addprice:0}]}],combo:[{title:"",choose:"",itemXuan:[],option:[{name:"",addprice:0},{name:"",addprice:10}]},{title:"",choose:"",itemXuan:[],option:[{name:"",addprice:0},{name:"",addprice:4}]}]},foodrule:{specifications:[{required:!0,validator:t,trigger:"blur"}],combo:[{required:!0,validator:a,trigger:"blur"}]},confirmLoading:!1,changeOptionVisible:!1}},methods:{guigeChange:function(e){"规格"===e.title?e.itemXuan=["大份","中份","小份"]:e.itemXuan=["全熟","八分熟","五分熟"]},itemXuanChange:function(e){e.itemXuan=this.comboMap.get(e.title),e.option.map((function(e){e.name=""}))},show:function(e){var t=[{title:"规格",choose:"中份",option:[{name:"小份",addprice:2},{name:"中份",addprice:1},{name:"大份",addprice:2}]},{title:"熟度",choose:"全熟",option:[{name:"全熟",addprice:0},{name:"八分熟",addprice:0}]}],a=[{title:"",choose:"",option:[{name:"",addprice:0},{name:"",addprice:10}]},{title:"",choose:"",option:[{name:"",addprice:0},{name:"",addprice:4}]}];switch(console.log(e),this.foodRuleForm.combo=a,this.foodRuleForm.specifications=t,this.record=e,this.foodRuleForm.classes=e.classes,console.log(this.foodRuleForm.classes),e.classes){case"套餐":e.combo&&(this.foodRuleForm.combo=e.combo);break;case"规格":e.specifications&&(this.foodRuleForm.specifications=e.specifications);break}this.changeOptionVisible=!0},submitForm:function(){var e=this;this.$refs.foodRuleForm.validate((function(t){if(!t)return console.log("添加失败"),!1;e.confirmLoading=!0,setTimeout((function(){switch(e.confirmLoading=!1,e.record.classes=e.foodRuleForm.classes,e.record.classes){case"套餐":e.record.combo=e.foodRuleForm.combo;break;case"规格":e.record.specifications=e.foodRuleForm.specifications;break}e.$message.success("默认选项功能暂不可用，敬请期待"),e.$message.success("成功修改"),e.changeOptionVisible=!1,e.$refs.foodRuleForm.resetFields()}),500)}))},handleCancel:function(){this.changeOptionVisible=!1},deleteZuConfirm:function(e,t){e="套餐"==e?"combo":"specifications",1===this.foodRuleForm[e].length?this.$message.warn("至少要有一个选项组"):(this.foodRuleForm[e].splice(t,1),this.$message.success("成功删除"))},deleteXiangConfirm:function(e,t){2===e.length?this.$message.warn("至少要有2个选项"):(e.splice(t,1),this.$message.success("成功删除"))},addZu:function(e){e="套餐"==e?"combo":"specifications",this.foodRuleForm[e].push({title:"",choose:"",itemXuan:[],option:[{name:"",addprice:""},{name:"",addprice:""}]}),this.$message.success("成功添加,请向下划")},addXiang:function(e){e.push({name:"",addprice:""}),this.$message.success("成功添加,请向下划")},comboSelect:function(e,t,a){var n=e.option.some((function(e){return e.name===t}));console.log(n),n?this.$message.warn("该选项组已经有该选项"):(e.choose=t,a.name=t)}}},r=i,s=(a("acd7"),a("2877")),c=Object(s["a"])(r,n,o,!1,null,"465ec2c4",null);t["default"]=c.exports},7763:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("a-form-model",{ref:"form",staticClass:"password-retrieval-form",attrs:{model:e.model,rules:e.validatorRules},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.nextStep.apply(null,arguments)}}},[a("a-form-model-item",{attrs:{label:"邮箱",required:"",prop:"mail",labelCol:{span:5},wrapperCol:{span:19}}},[a("a-row",{attrs:{gutter:16}},[a("a-col",{staticClass:"gutter-row",attrs:{span:20}},[a("a-input",{attrs:{type:"text",autocomplete:"false",placeholder:"请输入邮箱号"},model:{value:e.model.mail,callback:function(t){e.$set(e.model,"mail",t)},expression:"model.mail"}},[a("a-icon",{style:{color:"rgba(0,0,0,.25)"},attrs:{slot:"prefix",type:"mail"},slot:"prefix"})],1)],1)],1)],1),e.show?a("a-form-model-item",{attrs:{required:"",prop:"captcha",label:"验证码",labelCol:{span:5},wrapperCol:{span:19}}},[a("a-row",{attrs:{gutter:16}},[a("a-col",{staticClass:"gutter-row",attrs:{span:12}},[a("a-input",{attrs:{type:"text",placeholder:"邮箱验证码"},model:{value:e.model.captcha,callback:function(t){e.$set(e.model,"captcha",t)},expression:"model.captcha"}},[a("a-icon",{style:{color:"rgba(0,0,0,.25)"},attrs:{slot:"prefix",type:"code"},slot:"prefix"})],1)],1),a("a-col",{staticClass:"gutter-row",attrs:{span:8}},[a("a-button",{attrs:{tabindex:"-1",size:"default",disabled:e.state.smsSendBtn},domProps:{textContent:e._s(e.state.smsSendBtn?e.state.time+" s":"获取验证码")},on:{click:function(t){return t.stopPropagation(),t.preventDefault(),e.getCaptcha.apply(null,arguments)}}})],1)],1)],1):e._e(),a("a-form-model-item",{attrs:{wrapperCol:{span:19,offset:5}}},[a("router-link",{staticStyle:{float:"left","line-height":"40px"},attrs:{to:{name:"login"}}},[e._v("使用已有账户登录")]),a("a-button",{staticStyle:{"margin-left":"20px"},attrs:{type:"primary"},on:{click:e.nextStep}},[e._v("下一步")])],1)],1)],1)},o=[],i=a("365c"),r={name:"Step2",props:["userList"],data:function(){return{model:{},loading:!1,dropList:"0",smscode:1,captcha:"",show:!0,state:{time:60,smsSendBtn:!1},formLogin:{captcha:"",mail:""},validatorRules:{mail:[{required:!0,message:"请输入邮箱号!"},{validator:this.validateMail}],captcha:[{required:!0,message:"请输入邮箱验证码!"}]}}},computed:{},methods:{nextStep:function(){var e=this,t=this;t.loading=!0,this.$refs["form"].validate((function(a){1==a&&(e.model.captcha.toUpperCase()===e.smscode.toUpperCase()?t.$emit("nextStep",{email:e.model.mail}):e.cmsFailed("验证码错误"))}))},getCaptcha:function(e){e.preventDefault();var t=this;t.$refs["form"].validateField("mail",(function(e){if(e)t.cmsFailed(e);else{t.state.smsSendBtn=!0;var a=window.setInterval((function(){t.state.time--<=0&&(t.state.time=60,t.state.smsSendBtn=!1,window.clearInterval(a))}),1e3),n=t.$message.loading("验证码发送中..",0);Object(i["d"])({sendTo:t.model.mail}).then((function(e){t.smscode=e.msg,setTimeout(n,500)}))}}))},cmsFailed:function(e){"该用户不存在或未绑定手机号"==e&&(e="该用户不存在或者未绑定邮箱"),this.$notification["error"]({message:"验证错误",description:e,duration:4}),console.log(e)},handleChangeSelect:function(e){var t=this;console.log(e),0==e?(t.dropList="0",t.show=!0):(t.dropList="1",t.show=!1)},validateMail:function(e,t,a){if(t){var n=/^[A-Za-zd0-9]+([-_.][A-Za-zd]+)*@([A-Za-zd]+[-.])+[A-Za-zd]{2,5}$/;n.test(t)?a():a("请输入正确的邮箱号")}else a()}}},s=r,c=(a("6d93"),a("2877")),l=Object(c["a"])(s,n,o,!1,null,"f2825f7a",null);t["default"]=l.exports},8145:function(e,t,a){},"82f5":function(e,t,a){},8375:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"outter"},[a("a-spin",{attrs:{spinning:e.spinning}},[a("a-tabs",{attrs:{"default-active-key":"未完成"},on:{change:e.tabChange}},[a("a-tab-pane",{key:"未完成",staticClass:"tab",attrs:{tab:"未完成"}},[a("div",{staticClass:"contentOrder"},[0==e.order.length?a("div",{staticClass:"emptyBox"},[e._v(" 已经完成所有订单啦！ ")]):e._l(e.order,(function(t){return a("div",{key:t.num,staticClass:"box"},[a("div",{staticClass:"tablenum"},[e._v(e._s(t.table))]),a("div",{staticClass:"order"},[a("div",{staticClass:"remark"},[e._v(" 备注:"+e._s(""===t.remark?"无":t.remark)+" ")]),a("a-checkbox-group",{attrs:{options:t.options},on:{change:function(a){return e.onChange(t)}},model:{value:t.selected,callback:function(a){e.$set(t,"selected",a)},expression:"item.selected"}})],1),a("div",{class:!0===t.checkAll?"orderfinsh":"orderdetail"},[a("div",{staticClass:"ordernum"},[e._v("by "+e._s(t.chiefName))]),a("div",{staticClass:"ordernum"},[e._v("订单号："+e._s(t.num))]),a("div",{staticClass:"ordernum"},[e._v("订单时间:"+e._s(t.time))]),a("div",{staticClass:"state"},[e._v(" "+e._s(!0===t.checkAll?"已完成":"未完成")+" ")])]),a("a-popconfirm",{attrs:{title:"确定删除这个订单吗?","ok-text":"确定","cancel-text":"取消"},on:{confirm:function(a){return e.deleteConfirm(t)}}},[a("a",{attrs:{href:"#"}},[a("a-icon",{attrs:{type:"close"}})],1)])],1)}))],2)]),a("a-tab-pane",{key:"已完成",staticClass:"tab",attrs:{tab:"已完成"}},[a("a-range-picker",{staticClass:"datePicker",attrs:{placeholder:["开始时间","结束时间"]},on:{change:e.dateChange},model:{value:e.time,callback:function(t){e.time=t},expression:"time"}}),a("a-button",{staticClass:"resect",on:{click:e.resect}},[e._v("重置")]),a("div",{staticClass:"contentOrder"},e._l(e.order,(function(t){return a("div",{key:t.num,staticClass:"box"},[a("div",{staticClass:"tablenum"},[e._v(e._s(t.table))]),a("div",{staticClass:"order"},[a("a-checkbox-group",{attrs:{options:t.options,disabled:""},on:{change:function(a){return e.onChange(t)}},model:{value:t.selected,callback:function(a){e.$set(t,"selected",a)},expression:"item.selected"}})],1),a("div",{staticClass:"orderfinsh"},[a("div",{staticClass:"ordernum"},[e._v("by "+e._s(t.chiefName))]),a("div",{staticClass:"ordernum"},[e._v("订单号："+e._s(t.num))]),a("div",{staticClass:"ordernum"},[e._v("订单时间:"+e._s(t.time))]),a("div",{staticClass:"state"},[e._v("已完成")])]),a("a-popconfirm",{attrs:{title:"确定删除这个订单吗?","ok-text":"确定","cancel-text":"取消"},on:{confirm:function(a){return e.deleteConfirm(t)}}},[a("a",{attrs:{href:"#"}},[a("a-icon",{attrs:{type:"close"}})],1)])],1)})),0),a("a-pagination",{staticClass:"pagination",attrs:{pageSize:e.pageSize,total:e.total,"show-less-items":"","show-quick-jumper":""},model:{value:e.current,callback:function(t){e.current=t},expression:"current"}})],1)],1)],1),a("a-back-top",{attrs:{visibilityHeight:200}})],1)},o=[],i=a("b775"),r={getUnfinishedOrder:"/admin/unfinishedOrder",getAllOrder:"/admin/allOrder",searchOrder:"/admin/searchOrder",orderChange:"/admin/orderChange",deleteOrder:"/admin/order",getOrderByPage:"/admin/orderByPage"};function s(){return Object(i["a"])({url:r.getUnfinishedOrder,method:"get"})}function c(e){return Object(i["a"])({url:r.searchOrder,method:"post",data:e})}function l(e){return Object(i["a"])({url:r.orderChange,method:"post",data:e})}function u(e){return Object(i["a"])({url:r.deleteOrder,method:"delete",params:e})}function d(e){return Object(i["a"])({url:r.getOrderByPage,method:"get",params:e})}var m={data:function(){return{current:1,checkAll:!1,order:[],spinning:!0,key:"未完成",total:10,pageSize:10,time:""}},created:function(){this.getUnfinshed(),this.initWebSocket()},watch:{current:function(e){this.getFinshed()}},methods:{initWebSocket:function(){var e="wss://miswestrestaurant.xyz/websocket";this.websock=new WebSocket(e),this.websock.onopen=this.websocketonopen,this.websock.onerror=this.websocketonerror,this.websock.onmessage=this.websocketonmessage,this.websock.onclose=this.websocketclose},websocketonopen:function(){console.log("WebSocket连接成功")},websocketonerror:function(e){console.log("WebSocket连接发生错误")},websocketonmessage:function(e,t){console.log("WebSocket接受消息"),console.log(e),"新订单！"===e.data&&"未完成"==this.key&&this.getUnfinshed()},destroyed:function(){this.websocketclose()},resect:function(){this.getFinshed()},getUnfinshed:function(){var e=this;this.time=[],this.pageSize=10,this.spinning=!0,s().then((function(t){t.data.map((function(e){e.options=e.option,e.time=e.orderTime,e.num=e.orderNo,e.table=e.seatNo,e.checkAll=e.cheackAll})),e.order=t.data,e.spinning=!1}))},getFinshed:function(){var e=this;this.pageSize=10,this.time=[],this.spinning=!0,d({pageSize:10,pageNum:this.current}).then((function(t){e.total=t.data.total;var a=[];t.data.list.map((function(e){e.options=e.option,e.time=e.orderTime,e.num=e.orderNo,e.table=e.seatNo,e.checkAll=e.cheackAll,!0===e.checkAll&&a.push(e)})),e.order=a,e.spinning=!1}))},deleteConfirm:function(e){var t=this;u({orderNo:e.orderNo}).then((function(e){200===e.code&&(t.$message.success("成功删除"),"未完成"===t.key?t.getUnfinshed():t.getFinshed())}))},dateChange:function(e,t){var a=this;this.spinning=!0,c({startTime:t[0]+"",endTime:t[1]+""}).then((function(e){var t=[];a.total=e.data.length,a.pageSize=e.data.length,a.current=1,e.data.map((function(e){e.options=e.option,e.time=e.orderTime,e.num=e.orderNo,e.table=e.seatNo,e.checkAll=e.cheackAll,!0===e.checkAll&&t.push(e)})),a.order=t,a.spinning=!1}))},tabChange:function(e){"未完成"===e?(this.getUnfinshed(),this.key="未完成"):(this.getFinshed(),this.key="已完成")},onChange:function(e){console.log(e),e.checkAll=e.selected.length===e.options.length,0!==e.selected.length&&l({orderNo:e.orderNo,selected:e.selected}).catch((function(e){console.log(e)}))}}},f=m,p=(a("3e7f"),a("2877")),h=Object(p["a"])(f,n,o,!1,null,"7fba3f7c",null);t["default"]=h.exports},9103:function(e,t,a){},9160:function(e,t,a){"use strict";a("b6ad")},"9a3d":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"result"},[a("div",[a("a-icon",{class:[e.isSuccess?"success":"error","icon"],attrs:{type:e.isSuccess?"check-circle":"close-circle"}})],1),e.title?a("div",{staticClass:"title"},[e._v(e._s(e.title))]):e._e(),e.description?a("div",{staticClass:"description"},[e._v(e._s(e.description))]):e._e(),e.content?a("div",{staticClass:"content"},[e._t("default")],2):e._e(),a("div",{staticClass:"action"},[e._t("action")],2)])},o=[],i={name:"Result",props:{isSuccess:{type:Boolean,default:!1},title:{type:String,default:""},description:{type:String,default:""},content:{type:Boolean,default:!0}}},r=i,s=(a("fce6"),a("2877")),c=Object(s["a"])(r,n,o,!1,null,"5cd17224",null);t["default"]=c.exports},"9b2b":function(e,t,a){},"9bda":function(e,t,a){"use strict";a("f09a")},"9c72":function(e,t,a){},"9d8d":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"picture"},[a("a-spin",{attrs:{spinning:e.spinning}},[a("a-tabs",{attrs:{"default-active-key":"营业额",activeKey:e.key},on:{change:e.callback}},[a("a-tab-pane",{key:"营业额",staticClass:"tab",attrs:{tab:"营业额"}},[a("a-select",{staticStyle:{width:"120px"},attrs:{maxTagCount:15,dropdownMenuStyle:{height:"100px"}},model:{value:e.Syear,callback:function(t){e.Syear=t},expression:"Syear"}},e._l(e.sales,(function(t,n){return a("a-select-option",{key:n,attrs:{value:t}},[e._v(" "+e._s(t)+" ")])})),1),a("div",{ref:"xian",staticClass:"an"})],1),a("a-tab-pane",{key:"单品销量",staticClass:"tab",attrs:{tab:"单品销量"}},[a("div",{ref:"yuan",staticClass:"an"})]),a("a-tab-pane",{key:"订单量",staticClass:"tab",attrs:{tab:"订单量"}},[a("a-select",{staticStyle:{width:"120px"},attrs:{maxTagCount:15,dropdownMenuStyle:{height:"100px"}},model:{value:e.Oyear,callback:function(t){e.Oyear=t},expression:"Oyear"}},e._l(e.sales,(function(t,n){return a("a-select-option",{key:n,attrs:{value:t}},[e._v(" "+e._s(t)+" ")])})),1),a("div",{ref:"zhu",staticClass:"an"})],1)],1)],1)],1)},o=[],i=a("b775"),r={getTotalSales:"/admin/sale-volume",getQuantitySold:"/admin/sale-quantity",getOrderNum:"/admin/orderNum"};function s(){return Object(i["a"])({url:r.getTotalSales,method:"get"})}function c(){return Object(i["a"])({url:r.getQuantitySold,method:"get"})}function l(){return Object(i["a"])({url:r.getOrderNum,method:"get"})}var u={data:function(){return{key:"营业额",saledata:"",orderdata:"",yuandata:"",sales:[],orders:[],Syear:"",Oyear:"",Salemap:"",Ordermap:"",Map:new Map,spinning:!0}},mounted:function(){var e=this;this.spinning=!0;var t=new Map,a=new Map;s().then((function(a){t.set("2022",[500,900,330]),t.set("2021",[100,500,900,330,710,203,188,888,777,666,777,444]),t.set("2020",[500,900,330,710,203,188,888,777,666,777,444,100]),a.data.map((function(e){var a="".concat(e.year);t.get(a)?t.get(a).push(e.value):t.set(a,[e.value])})),t.forEach((function(t,a){console.log(a,t),e.sales.push(a)})),e.Syear=e.sales[0],e.Salemap=t,e.saledata=e.Salemap.get(e.Syear),e.spinning=!1,e.doEchart("xian")})),c().then((function(t){t.data.map((function(e){return e.name=e.itemName})),e.yuandata=t.data})),l().then((function(t){a.set("2022",[500,900,330]),a.set("2021",[100,500,900,330,710,203,188,888,777,666,777,444]),a.set("2020",[500,900,330,710,203,188,888,777,666,777,444,100]),t.data.map((function(e){var t="".concat(e.year);a.get(t)?a.get(t).push(e.value):a.set(t,[e.value])})),a.forEach((function(t,a){console.log(a,t),e.orders.push(a)})),e.Oyear=e.orders[0],e.Ordermap=a,e.saledata=e.Ordermap.get(e.Oyear)}))},watch:{Syear:function(e){this.saledata=this.Salemap.get(e),this.doEchart("xian")},Oyear:function(e){try{this.orderdata=this.Ordermap.get(e),this.doEchart("zhu")}catch(t){}}},methods:{callback:function(e){var t=this;this.key=e,"单品销量"===e?setTimeout((function(){t.doEchart("yuan")}),0):"订单量"===e&&setTimeout((function(){t.doEchart("zhu")}),0)},doEchart:function(e){var t;this.Map.get(e)?t=this.Map.get(e):(t=this.$echarts.init(this.$refs[e]),this.Map.set(e,t));var a,n={title:{text:"菜品销量",left:"center"},tooltip:{trigger:"item"},legend:{orient:"vertical",left:"left"},series:[{name:"Access From",type:"pie",radius:"50%",data:this.yuandata,emphasis:{itemStyle:{shadowBlur:10,shadowOffsetX:0,shadowColor:"rgba(0, 0, 0, 0.5)"}}}]},o={xAxis:{type:"category",data:["一月","二月","三月","四月","五月","六月","七月","八月","九月","十月","十一月","十二月"]},yAxis:{type:"value"},series:[{data:this.saledata,type:"line"}]},i={xAxis:{type:"category",data:["一月","二月","三月","四月","五月","六月","七月","八月","九月","十月","十一月","十二月"]},yAxis:{type:"value"},series:[{data:this.orderdata,type:"bar"}]};a="yuan"==e?n:"xian"==e?o:i,a&&t.setOption(a)}}},d=u,m=(a("6e06"),a("2877")),f=Object(m["a"])(d,n,o,!1,null,"bb083d00",null);t["default"]=f.exports},a175:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("a-form-model",{ref:"form",attrs:{model:e.model,rules:e.validatorRules}},[n("a-form-model-item",{attrs:{required:"",prop:"username"}},[n("a-input",{attrs:{size:"large",placeholder:"请输入帐户名 / admin"},model:{value:e.model.username,callback:function(t){e.$set(e.model,"username",t)},expression:"model.username"}},[n("a-icon",{style:{color:"rgba(0,0,0,.25)"},attrs:{slot:"prefix",type:"user"},slot:"prefix"})],1)],1),n("a-form-model-item",{attrs:{required:"",prop:"password"}},[n("a-input",{attrs:{size:"large",type:"password",autocomplete:"false",placeholder:"请输入密码 / 123456"},model:{value:e.model.password,callback:function(t){e.$set(e.model,"password",t)},expression:"model.password"}},[n("a-icon",{style:{color:"rgba(0,0,0,.25)"},attrs:{slot:"prefix",type:"lock"},slot:"prefix"})],1)],1),n("a-row",{attrs:{gutter:0}},[n("a-col",{attrs:{span:16}},[n("a-form-model-item",{attrs:{required:"",prop:"inputCode"}},[n("a-input",{attrs:{size:"large",type:"text",placeholder:"请输入验证码"},model:{value:e.model.inputCode,callback:function(t){e.$set(e.model,"inputCode",t)},expression:"model.inputCode"}},[n("a-icon",{style:{color:"rgba(0,0,0,.25)"},attrs:{slot:"prefix",type:"smile"},slot:"prefix"})],1)],1)],1),n("a-col",{staticStyle:{"text-align":"right"},attrs:{span:8}},[e.requestCodeSuccess?n("img",{staticStyle:{height:"40px",width:"110px"},attrs:{src:e.randCodeImage},on:{click:e.handleChangeCheckCode}}):n("img",{staticStyle:{"margin-top":"2px"},attrs:{src:a("d5ac")},on:{click:e.handleChangeCheckCode}})])],1)],1)],1)},o=[],i=a("365c"),r=a("2f62");function s(e,t){var a="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!a){if(Array.isArray(e)||(a=c(e))||t&&e&&"number"===typeof e.length){a&&(e=a);var n=0,o=function(){};return{s:o,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,r=!0,s=!1;return{s:function(){a=a.call(e)},n:function(){var e=a.next();return r=e.done,e},e:function(e){s=!0,i=e},f:function(){try{r||null==a.return||a.return()}finally{if(s)throw i}}}}function c(e,t){if(e){if("string"===typeof e)return l(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);return"Object"===a&&e.constructor&&(a=e.constructor.name),"Map"===a||"Set"===a?Array.from(e):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?l(e,t):void 0}}function l(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,n=new Array(t);a<t;a++)n[a]=e[a];return n}function u(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function d(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?u(Object(a),!0).forEach((function(t){m(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):u(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function m(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var f={name:"LoginAccount",props:["auto"],data:function(){return{requestCodeSuccess:!1,randCodeImage:"",randCodeText:1,currdatetime:"",loginType:0,model:{username:"admin",password:"123456",inputCode:""},validatorRules:{username:[{required:!0,message:"请输入用户名!"},{validator:this.handleUsernameOrEmail}],password:[{required:!0,message:"请输入密码!",validator:"click"}],inputCode:[{required:!0,message:"请输入验证码!"}]}}},created:function(){this.handleChangeCheckCode()},methods:d(d({},Object(r["b"])(["Login"])),{},{handleChangeCheckCode:function(){var e=this;this.currdatetime=(new Date).getTime(),this.model.inputCode="",Object(i["a"])({height:40,width:110}).then((function(t){console.log(t),200===t.code?(e.randCodeImage=t.data.inputCodePhoto,e.randCodeText=t.data.inputCode,e.requestCodeSuccess=!0):(e.$message.error(t.message),e.requestCodeSuccess=!1)})).catch((function(){e.requestCodeSuccess=!1}))},handleUsernameOrEmail:function(e,t,a){var n=/^([a-zA-Z0-9_-])+@([a-zA-Z0-9_-])+((\.[a-zA-Z0-9_-]{2,3}){1,2})$/;n.test(t)?this.loginType=0:this.loginType=1,a()},validateFields:function(e,t){var a,n=this,o=[],i=s(e);try{var r=function(){var e=a.value,t=new Promise((function(t,a){n.$refs["form"].validateField(e,(function(e){e?a(e):t()}))}));o.push(t)};for(i.s();!(a=i.n()).done;)r()}catch(c){i.e(c)}finally{i.f()}Promise.all(o).then((function(){t()})).catch((function(e){t(e)}))},acceptUsername:function(e){this.model["username"]=e},handleLogin:function(e){var t=this;this.validateFields(["username","password","inputCode"],(function(e){if(e)t.$emit("validateFail");else if(t.model.inputCode.toUpperCase()!==t.randCodeText.toUpperCase())t.$emit("fail",{message:"验证码错误"});else{var a={username:t.model.username,password:t.model.password,autoLogin:t.auto};console.log("登录参数",a),t.Login(a).then((function(e){t.$emit("success",e.result)})).catch((function(e){t.$emit("fail",e)}))}}))}})},p=f,h=a("2877"),g=Object(h["a"])(p,n,o,!1,null,"74431f14",null);t["default"]=g.exports},a1ed:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{class:["user-layout-wrapper",e.device],attrs:{id:"userLayout"}},[a("div",{staticClass:"container"},[e._m(0),a("router-view"),e._m(1)],1)])},o=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"top"},[a("div",{staticClass:"header"},[a("a",{attrs:{href:"/"}},[a("span",{staticClass:"title"},[e._v("Real餐厅管理系统")])])]),a("div",{staticClass:"desc"},[e._v(" 轻量 好看 好用 ")])])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"footer"},[a("div",{staticClass:"copyright"},[e._v(" Copyright © 2021 "),a("a",{staticStyle:{color:"rgb(132, 133, 135)"},attrs:{href:"javascript:;"}},[e._v("Real团队 ")]),e._v(" 出品 ")])])}],i=a("f855"),r={mixins:[i["a"]]},s=r,c=(a("d733"),a("2877")),l=Object(c["a"])(s,n,o,!1,null,"2c6d4b11",null);t["default"]=l.exports},a2ba:function(e,t,a){},a4ce:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("a-form-model",{ref:"form",staticClass:"password-retrieval-form",attrs:{model:e.model,rules:e.validatorRules}},[a("a-form-model-item",e._b({staticClass:"stepFormText",attrs:{prop:"password",label:"新密码"}},"a-form-model-item",e.layout,!1),[a("a-input",{attrs:{type:"password",autocomplete:"false"},model:{value:e.model.password,callback:function(t){e.$set(e.model,"password",t)},expression:"model.password"}})],1),a("a-form-model-item",e._b({staticClass:"stepFormText",attrs:{prop:"confirmPassword",label:"确认密码"}},"a-form-model-item",e.layout,!1),[a("a-input",{attrs:{type:"password",autocomplete:"false"},model:{value:e.model.confirmPassword,callback:function(t){e.$set(e.model,"confirmPassword",t)},expression:"model.confirmPassword"}})],1),a("a-form-model-item",{attrs:{wrapperCol:{span:19,offset:5}}},[a("a-button",{staticStyle:{"margin-left":"8px"},on:{click:e.prevStep}},[e._v("上一步")]),a("a-button",{staticStyle:{"margin-left":"20px"},attrs:{loading:e.loading,type:"primary"},on:{click:e.nextStep}},[e._v("提交")])],1)],1)],1)},o=[],i=a("365c"),r={name:"Step3",props:["mail"],data:function(){return{model:{},layout:{labelCol:{span:5},wrapperCol:{span:19}},loading:!1,validatorRules:{password:[{required:!0,pattern:/^(?=.*[a-zA-Z])(?=.*\d)(?=.*[~!@#$%^&*()_+`\-={}:";'<>?,.\/]).{8,}$/,message:"密码由8位数字、大小写字母和特殊符号组成!!"}],confirmPassword:[{required:!0,message:"密码不能为空!"},{validator:this.handlePasswordCheck}]}}},methods:{nextStep:function(){var e=this,t=this;t.loading=!0,t.$refs["form"].validate((function(a){!0===a?Object(i["f"])({confirmPassword:e.model.confirmPassword,password:e.model.confirmPassword,email:e.mail}).then((function(a){200===a.code?(e.$emit("nextStep",{mail:e.mail}),t.loading=!1):(t.passwordFailed(a.message),t.loading=!1)})):t.loading=!1}))},prevStep:function(){this.$emit("prevStep")},handlePasswordCheck:function(e,t,a){var n=this.model["password"];t&&n&&t.trim()!==n.trim()&&a(new Error("两次密码不一致")),a()},passwordFailed:function(e){this.$notification["error"]({message:"更改密码失败",description:e,duration:4})}}},s=r,c=(a("ee6e"),a("2877")),l=Object(c["a"])(s,n,o,!1,null,"4e9f3f93",null);t["default"]=l.exports},a6c4:function(e,t,a){"use strict";a("a2ba")},a82b:function(e,t,a){"use strict";a("04f1")},a8ed:function(e,t,a){},aa95:function(e,t,a){"use strict";a("7255")},ac2a:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"main"},[a("a-form-model",{staticClass:"user-layout-login",nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleSubmit.apply(null,arguments)}}},[a("login-account",{ref:"alogin",attrs:{auto:e.rememberMe},on:{validateFail:e.validateFail,success:e.loginSuccess,fail:e.requestFailed}}),a("a-form-model-item",[a("a-checkbox",{staticClass:"white",attrs:{"default-checked":""},on:{change:e.handleRememberMeChange}},[e._v("自动登录")]),a("router-link",{staticClass:"forge-password",staticStyle:{float:"right"},attrs:{to:{name:"forgetPassword"}}},[e._v(" 忘记密码 ")])],1),a("a-form-item",{staticStyle:{"margin-top":"24px"}},[a("a-button",{staticClass:"login-button",attrs:{size:"large",type:"primary",htmlType:"submit",loading:e.loginBtn,disabled:e.loginBtn},on:{click:function(t){return t.stopPropagation(),t.preventDefault(),e.handleSubmit.apply(null,arguments)}}},[e._v("确定 ")])],1)],1)],1)},o=[];function i(){var e=new Date,t=e.getHours();return t<9?"早上好":t<=11?"上午好":t<=13?"中午好":t<20?"下午好":"晚上好"}var r=a("a175"),s={components:{LoginAccount:r["default"]},data:function(){return{rememberMe:!0,loginBtn:!1}},created:function(){this.$local.remove("ACCESS_TOKEN"),this.getRouterData(),this.rememberMe=!0},methods:{handleRememberMeChange:function(e){this.rememberMe=e.target.checked},getRouterData:function(){var e=this;this.$nextTick((function(){var t=e.$route.params.username||e.$route.query.username||"";t&&e.$refs.alogin.acceptUsername(t)}))},handleSubmit:function(){this.loginBtn=!0,this.$refs.alogin.handleLogin(this.rememberMe)},validateFail:function(){this.loginBtn=!1},requestFailed:function(e){var t=e.message||"账号或密码错误";this.$notification["error"]({message:"登录失败",description:t,duration:4}),(t.indexOf("密码错误")>0||"验证码错误"==t)&&this.$refs.alogin.handleChangeCheckCode(),this.loginBtn=!1},loginSuccess:function(){this.$router.push({name:"index"}).catch((function(){console.log("登录跳转首页出错,这个错误从哪里来的")})),this.$notification.success({message:"欢迎",description:"".concat(i(),"，欢迎回来")})}}},c=s,l=(a("7131"),a("aa95"),a("2877")),u=Object(l["a"])(c,n,o,!1,null,"d60aa6d0",null);t["default"]=u.exports},acd7:function(e,t,a){"use strict";a("6772")},b6ad:function(e,t,a){},bc8d:function(e,t,a){e.exports=a.p+"img/jian.8308f580.png"},be89:function(e,t,a){"use strict";a("c2b5")},c2b5:function(e,t,a){},c82c:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"outter"},[n("a-spin",{attrs:{spinning:e.spinning}},[n("ALLTAB",{staticStyle:{width:"100%","min-height":"500px"},attrs:{defaultKey:"搜索",menu:e.menu,caiping:{caiping:e.caiping}},scopedSlots:e._u([{key:"searchmenu",fn:function(){return[n("a-input-search",{staticStyle:{width:"50%",margin:"10px auto",display:"block"},attrs:{placeholder:"搜索菜品","enter-button":""},model:{value:e.caiping,callback:function(t){e.caiping=t},expression:"caiping"}}),e._l(e.searchmenu,(function(t,o){return n("FOODITEM",{key:o,attrs:{item:t},scopedSlots:e._u([{key:"method",fn:function(){return[t.guige||t.combo?n("div",{staticClass:"manyoutter"},[n("a-badge",{attrs:{"number-style":{backgroundColor:"#2c2c2c",color:"white"},count:t.num}},[n("a-button",{attrs:{type:"primary"},on:{click:function(a){return e.chooseGuige(t)}}},[e._v("选规格")])],1)],1):n("div",{staticClass:"manyoutter"},[t.num>0?n("img",{staticClass:"manyicon",attrs:{src:a("bc8d"),alt:""},on:{click:function(a){return e.jian(t)}}}):e._e(),t.num>0?n("div",{staticClass:"many"},[e._v(e._s(t.num))]):e._e(),n("img",{staticClass:"manyicon",attrs:{src:a("e5a7"),alt:""},on:{click:function(a){return e.add(t)}}})])]},proxy:!0}],null,!0)})}))]},proxy:!0},{key:"do",fn:function(t){return[t.item.guige||t.item.combo?n("div",{staticClass:"manyoutter"},[n("a-badge",{attrs:{"number-style":{backgroundColor:"#2c2c2c",color:"white"},count:t.item.num}},[n("a-button",{attrs:{type:"primary"},on:{click:function(a){return e.chooseGuige(t.item)}}},[e._v("选规格")])],1)],1):n("div",{staticClass:"manyoutter"},[t.item.num>0?n("img",{staticClass:"manyicon",attrs:{src:a("bc8d"),alt:""},on:{click:function(a){return e.jian(t.item)}}}):e._e(),t.item.num>0?n("div",{staticClass:"many"},[e._v(" "+e._s(t.item.num)+" ")]):e._e(),n("img",{staticClass:"manyicon",attrs:{src:a("e5a7"),alt:""},on:{click:function(a){return e.add(t.item)}}})])]}}])})],1),n("div",{staticClass:"buy"},[n("div",{staticClass:"table"},[n("div",{staticClass:"quanping",on:{click:e.changeFullScreen}},[e._v("全屏模式")]),n("span",[e._v("桌号：")]),n("a-select",{staticStyle:{width:"120px"},attrs:{maxTagCount:3,dropdownMenuStyle:{height:"70px"}},on:{change:e.selectChange},model:{value:e.table,callback:function(t){e.table=t},expression:"table"}},e._l(e.tablelist,(function(t,a){return n("a-select-option",{key:a,attrs:{value:t}},[e._v(" "+e._s(t)+" ")])})),1)],1),n("div",{staticClass:"detail"},[e._m(0),e._l(e.carmenu,(function(t,o){return n("div",{key:o,staticClass:"two"},[n("div",{staticClass:"twotitle"},[e._v(" "+e._s(t.itemName)),t.descri?n("a",{staticClass:"detailDescri",attrs:{href:"javascript:;"},on:{click:function(a){return e.changeguige(t)}}},[e._v(e._s(t.descri)+"▼")]):e._e()]),n("div",{staticClass:"twoprice"},[e._v("￥"+e._s((t.price*t.num).toFixed(2)))]),n("div",{staticClass:"twooutter"},[n("img",{staticClass:"twoicon",attrs:{src:a("bc8d"),alt:""},on:{click:function(a){return e.jian(t)}}}),n("div",{staticClass:"many"},[e._v(e._s(t.num))]),n("img",{staticClass:"twoicon",attrs:{src:a("e5a7"),alt:""},on:{click:function(a){return e.add(t)}}})])])}))],2),n("div",{staticClass:"total"},[n("a-popconfirm",{attrs:{disabled:!(e.carmenu.length>0),title:"你确定清空购物车吗","ok-text":"确定","cancel-text":"取消"},on:{confirm:!0}},[n("div",{staticClass:"totalshop"},[n("a",{staticClass:"totalshopa",attrs:{href:"javascript:;"}},[n("a-icon",{attrs:{type:"shopping-cart"}}),e._v("清空购物车")],1)])]),n("div",{staticClass:"totalmany"},[e._v("合计："+e._s(e.totalmany.summany)+"件")]),n("div",{staticClass:"totalmuch"},[e._v("总价："+e._s(e.totalmany.summuch.toFixed(2))+"元")]),n("a-button",{staticClass:"totalbuy",attrs:{size:"large",disabled:!(e.carmenu.length>0)||""===e.table,type:"primary"},on:{click:function(t){e.zhifuvisible=!0}}},[e._v("结算")])],1)]),n("a-modal",{attrs:{title:"支付",visible:e.zhifuvisible,"confirm-loading":e.confirmLoading,okText:"完成支付",cancelText:"取消"},on:{ok:e.submitsuccess,cancel:e.handleCancel}},[n("img",{staticClass:"zhifu",attrs:{src:a("e788"),alt:""}})]),n("GUIGE",{ref:"guige"})],1)},o=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"twoabsolute"},[a("div",{staticClass:"twotitle"},[e._v("名称")]),a("div",{staticClass:"twoprice"},[e._v("价格")]),a("div",{staticClass:"twooutter"},[e._v("数量")])])}],i=a("e906"),r=a("6e1b"),s=a("f7de"),c=a("e97f"),l=a("2f62");function u(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function d(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?u(Object(a),!0).forEach((function(t){m(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):u(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function m(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var f={data:function(){return{caiping:"",confirmLoading:!1,zhifuvisible:!1,menu:[{categoryName:"面类",child:[{itemName:"面包"}]}],table:"",tablelist:[],spinning:!1}},created:function(){},mounted:function(){this.getAllTable(),this.getmenu()},components:{FOODITEM:r["default"],ALLTAB:i["default"],GUIGE:s["default"]},computed:{carmenu:function(){var e=[];return this.menu.map((function(t){t.child.map((function(t){t.num>0&&(t.guige||t.combo?t.kids.map((function(t){t.num>0&&e.push(t)})):e.push(t))}))})),e},totalmany:function(){var e=0,t=0;return this.carmenu.map((function(a){e+=a.num,t+=a.num*a.price})),{summany:e,summuch:t}},searchmenu:function(){var e=this,t=[];return this.menu.map((function(a){a.child.map((function(a){-1!==a.itemName.indexOf(e.caiping)&&t.push(a)}))})),t}},methods:d(d({getmenu:function(){var e=this;this.spinning=!0,Object(c["h"])().then((function(t){t.data.rightmenu.map((function(e){e.child.map((function(e){e.num=0}))})),e.menu=t.data.rightmenu,e.spinning=!1}))},getAllTable:function(){var e=this;Object(c["i"])().then((function(t){var n=[];if(t.data.tableList.map((function(e){0===e.isOccupied&&n.push(e.seatNo)})),0===n.length)e.$notification.error({message:"系统提示",description:"暂时无座，请重新刷新",duration:40});else{e.tablelist=n;var o=a("4328");Object(c["c"])(o.stringify({table:n[0]})).then((function(t){e.table=n[0]}))}}))},changeguige:function(e){this.$refs.guige.change(e,this.menu)},clearall:function(e){var t=this;e&&Object(c["d"])(),this.carmenu.map((function(e){e.num=0,void 0!=e.grandKey&&(t.menu[e.grandKey].child[e.parentKey].num=0)}))},submitsuccess:function(){var e=this;Object(c["e"])().then((function(t){401===t.code?e.$notification.error({message:"系统提示",description:"座位已被选择，请重新选择",duration:4}):(e.clearall(!1),e.getAllTable())})),this.zhifuvisible=!1},handleCancel:function(){this.zhifuvisible=!1},add:function(e){this.do(e,"add")},jian:function(e){this.do(e,"reduce")},do:function(e,t){var a=this,n=e.descri;void 0!==e.descri&&-1!==e.descri.indexOf("+")||(n=(void 0===e.descri?"":e.descri)+"+"),!0===e.combo?Object(c["f"])({comboNo:e.itemNo,method:t,num:1,name:n,price:e.price+""}).then((function(n){a.method(e,t)})):(console.log({itemNo:e.itemNo,method:t,num:1,detail:n}),Object(c["g"])({itemNo:e.itemNo,method:t,num:1,detail:n}).then((function(n){a.method(e,t)})))},method:function(e,t){"add"===t?(e.num++,void 0!=e.item&&this.menu[e.grandKey].child[e.parentKey].num++):(e.num--,void 0!=e.item&&this.menu[e.grandKey].child[e.parentKey].num--)},chooseGuige:function(e){this.$refs.guige.show(e)}},Object(l["b"])(["setSidebar"])),{},{changeFullScreen:function(){var e=document.documentElement;this.fullscreen?document.exitFullscreen?document.exitFullscreen():document.webkitCancelFullScreen?document.webkitCancelFullScreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.msExitFullscreen&&document.msExitFullscreen():e.requestFullscreen?e.requestFullscreen():e.webkitRequestFullScreen?e.webkitRequestFullScreen():e.mozRequestFullScreen?e.mozRequestFullScreen():e.msRequestFullscreen&&e.msRequestFullscreen(),this.fullscreen=!this.fullscreen,this.setSidebar(!1)},selectChange:function(e){var t=this;Object(c["b"])({table:this.table}).then((function(e){409===e.code?t.$notification.error({message:"失败",description:"座位已被占用，请重新选择！"}):t.$message.success("选座成功！")}))}})},p=f,h=(a("3677"),a("2877")),g=Object(h["a"])(p,n,o,!1,null,"3bf74aae",null);t["default"]=g.exports},ca88:function(e,t,a){"use strict";a("8145")},cc89:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("exception-page",{attrs:{type:"404"}})},o=[],i=a("0673"),r={components:{ExceptionPage:i["default"]}},s=r,c=a("2877"),l=Object(c["a"])(s,n,o,!1,null,"ec864426",null);t["default"]=l.exports},cd2d:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("a-form",{staticStyle:{margin:"40px auto 0"}},[a("result",{attrs:{title:"更改密码成功","is-success":!0}},[a("div",{staticClass:"toLogin"},[a("h3",[e._v("将在"),a("span",[e._v(e._s(e.time))]),e._v("秒后返回登录页面.")])])])],1)],1)},o=[],i=a("9a3d"),r={name:"Step4",components:{Result:i["default"]},data:function(){return{loading:!1,time:0}},methods:{countDown:function(){var e=this;e.time--}},mounted:function(){var e=this;e.time=5,setInterval(e.countDown,1e3)},watch:{time:function(e,t){0==e&&this.$router.push({name:"login"})}}},s=r,c=(a("be89"),a("2877")),l=Object(c["a"])(s,n,o,!1,null,"4c40702e",null);t["default"]=l.exports},d5ac:function(e,t){e.exports="data:image/png;base64,/9j/4AAQSkZJRgABAQEAYABgAAD/4QAiRXhpZgAATU0AKgAAAAgAAQESAAMAAAABAAEAAAAAAAD/2wBDAAIBAQIBAQICAgICAgICAwUDAwMDAwYEBAMFBwYHBwcGBwcICQsJCAgKCAcHCg0KCgsMDAwMBwkODw0MDgsMDAz/2wBDAQICAgMDAwYDAwYMCAcIDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAz/wAARCAAjAGkDASIAAhEBAxEB/8QAHwAAAQUBAQEBAQEAAAAAAAAAAAECAwQFBgcICQoL/8QAtRAAAgEDAwIEAwUFBAQAAAF9AQIDAAQRBRIhMUEGE1FhByJxFDKBkaEII0KxwRVS0fAkM2JyggkKFhcYGRolJicoKSo0NTY3ODk6Q0RFRkdISUpTVFVWV1hZWmNkZWZnaGlqc3R1dnd4eXqDhIWGh4iJipKTlJWWl5iZmqKjpKWmp6ipqrKztLW2t7i5usLDxMXGx8jJytLT1NXW19jZ2uHi4+Tl5ufo6erx8vP09fb3+Pn6/8QAHwEAAwEBAQEBAQEBAQAAAAAAAAECAwQFBgcICQoL/8QAtREAAgECBAQDBAcFBAQAAQJ3AAECAxEEBSExBhJBUQdhcRMiMoEIFEKRobHBCSMzUvAVYnLRChYkNOEl8RcYGRomJygpKjU2Nzg5OkNERUZHSElKU1RVVldYWVpjZGVmZ2hpanN0dXZ3eHl6goOEhYaHiImKkpOUlZaXmJmaoqOkpaanqKmqsrO0tba3uLm6wsPExcbHyMnK0tPU1dbX2Nna4uPk5ebn6Onq8vP09fb3+Pn6/9oADAMBAAIRAxEAPwD99oSWft8pJJAyO/HXr61NVXSLF7C02yTNcSM7uZGRVbDOzBTtGPlDYz3xnqTVpjgUARXlnHfweXJu27lb5XKnKkMOQQeoFK1tG27citu4ORnNeB/B39s24+Lf7W/jvwRDa6fB4a8H2HmJeFW+0TzpIiSMW3lPK+Y7cLnChiecDzu7/wCClOs6x8L/ABt8QtD0vRZvCXhHX7TS4bO4imF7qVu5w83mhwsTNvRlUxttAYHdkEJSuvVJ/Juy/ELNO3nb52v+R9hNGrjDKpGQeR6dKdXI23xl0e7+DUfjqOWRtDm0oavGSoWRojH5gXBP3yOMZ68Vz/7IX7SEH7VHwP0/xZHZppt3JNNa3tmjtItvLG5HDFVyGTY/GQu/buJUmn9px6rcE7xUujOu+IPj6LwHZWP+gX+q3urXX2KxsbLyvPupfLklKqZXSMYjikclnUYQ9TgHD/4W74g/6Jd46/8AAvRv/k+l+Lv/ACP/AMLf+xnm/wDTNqlcxrfxyvvFfh2aP/hH/FXh6xuNZTQTrNtd2LS2Nyb5bNXEZkclfOKjlGBU5wQaAOlj+Levxxqv/Cr/AB3xxzd6MT/6X0n/AAtnXhPu/wCFXeOs9B/pWi+3/T/WnDofi5fCLWbeJNHbWPO+W/8A7EYKIfQxfaMGT/byFz/yz7Vyd78VdQ+F9rrFgdG8SeLl8MW/2zVdXkubOHcXRpmwrOmAq9FRQFGAM9SAdx4B8fw+PLW+P2G/0q80u6+xXtle+V51pL5ccoVjE7xndHLG4Kuww46HIG/Xm3wE1OTXPEXxEvJLWaxkvNftZntpivmW5bRNLJRipI3LnBwSMjg16PG+4sP7px0xQBBqzXC2J+zxxySb0yruUG3cN2CAfmC5IB4JwCQCSLNQ3pYW/wAoydy/w7uNwzxkdu/brz0qagBEOVHbjoa4f47eFfEfizw9Z23h9bG6SS48vVLK81GTT4ry0KksgmjgmdWLrGpwvMbyjIJVh12n3NxNczLJFGsCBfKcPlmPO4EdsYHOeSSMfKC1uk1dWGnY/Ov9j/xDD4o/4KBfFix0268PyWfimO9tUlXVNqmMyhi1oFjYXBAGQuUGwFsjGDxGkfDLV/hv+xp8VPhxqNuy+M5PFun29rpSHddahlo9jwR/ekR1jdlZQQQrHscfqWRmmmLg4Zh+XFJRskvJJ+dncV3dvzuvK6sfJ3iT4Z+J/g3+y9Z2PiBfDK+GfCvgp7VnudbkgmtNRltpI5H8vyGjmbdIsUQMqAb2wCWXan/BGebzf2Tb5f3f7rxDcp8r7j/qYD8wx8p56c8YPfA+sTFkdaeBgVV3zSl3J5fdjHt/lY4P4vnHj/4W+n/CTz9/+oNqdcXbyJD4F0+Obatva/EaVdVGPvSSarK9sep6zy2bDk4GB2wPUvH3gO38eWdmk11fWFzptz9ss7yzdUntZfLeIspYMvMcsiEMpBDn615Po37MVvZeJ5NL1T7ZfSXgl1e18S2c1xb3kNzFPC6/aVLvBJLudJEO0I3kN+6AQUFHoV/8T9R03V5Fbwb4lk0qO4Nqb6FYJGJDFfNECyGUw5GNwXceDs2fPXL+M7mzs/FPxVubiNpNJh8KWx1KNV/1kqpfM4Hq3kGIH22Y71k2vgnxpo/gfXGvvFXjzUtc0W5Npai2+yxQ6vuWNoZVH2ZiifvVWQjcEaOXGQtV/EP7NEs1pY2Oo+Z4y8SeIImh1XXdXM/2GCONOhtbd40bO7aillJG7dIcAEA6z9nC1urG/wDHkF9/x+Q63Zx3GTn94NC0oNz9c16RbRsskjFmIY4AI9M89M98d+APfPN/Cr4aQ/DDw41mt9fate3TrPf6hePvnvphFHD5jH/rnFGoHOAgySck9UpyKAKeqi6aS1FvNHFH5pa4DQtI0kYRvlQgjY27YdxDcBgBkhluVi6rfXb+LbOzjtz9l8hpZJZI2MbHIxtdSQHQquUdV3CQMj/u5FO1QAUUUUAFFFFABRRRQBW1H92FkUsGwV68YIz06dhzUUnJK7nxsR+GI53Z/wAjpjjpxRRQA91xCZNzbk34+Y46nqOh/GrdFFABUMsjJNGo6M2D+RP9KKKAJqKKKAP/2Q=="},d733:function(e,t,a){"use strict";a("a8ed")},e409:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("exception-page",{attrs:{type:"403"}})},o=[],i=a("0673"),r={components:{ExceptionPage:i["default"]}},s=r,c=a("2877"),l=Object(c["a"])(s,n,o,!1,null,"e1fa96e6",null);t["default"]=l.exports},e5a7:function(e,t,a){e.exports=a.p+"img/jia.77ece5ef.png"},e788:function(e,t,a){e.exports=a.p+"img/zhifu.9ecd5bb0.png"},e906:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("a-tabs",{attrs:{"default-active-key":e.defaultKey}},[a("a-tab-pane",{key:"搜索",staticClass:"tab"},[a("span",{attrs:{slot:"tab"},slot:"tab"},[a("a-icon",{attrs:{type:"search"}}),e._v(" 搜索 ")],1),e._t("searchmenu")],2),e._l(e.menu,(function(t){return a("a-tab-pane",{key:t.categoryName,staticClass:"tab",attrs:{tab:t.categoryName}},e._l(t.child,(function(t){return a("FOODITEM",{key:t.itemName,attrs:{item:t},scopedSlots:e._u([{key:"method",fn:function(){return[e._t("do",null,{item:t})]},proxy:!0}],null,!0)})})),1)}))],2)},o=[],i=a("6e1b"),r={props:{defaultKey:String,menu:Array,addmore:{require:!1,default:!1,type:Boolean}},components:{FOODITEM:i["default"]}},s=r,c=(a("f099"),a("2877")),l=Object(c["a"])(s,n,o,!1,null,"9785ee1a",null);t["default"]=l.exports},e97f:function(e,t,a){"use strict";a.d(t,"i",(function(){return i})),a.d(t,"c",(function(){return r})),a.d(t,"b",(function(){return s})),a.d(t,"h",(function(){return c})),a.d(t,"e",(function(){return l})),a.d(t,"g",(function(){return u})),a.d(t,"d",(function(){return d})),a.d(t,"f",(function(){return m})),a.d(t,"a",(function(){return f}));var n=a("b775"),o={getRightmenu:"/user/rightmenu",dofood:"/user/dofood",clearShopCar:"/user/clearShopCar",doTaoCan:"/user/doCombo",change:"/user/changeCar",commitOrder:"/user/commitOrder",getTable:"/user/all-table",chooseTable:"/user/table",changeTable:"/user/changeTable"};function i(){return Object(n["a"])({url:o.getTable,method:"get"})}function r(e){return Object(n["a"])({url:o.chooseTable,method:"post",data:e})}function s(e){return Object(n["a"])({url:o.changeTable,method:"get",params:e})}function c(){return Object(n["a"])({url:o.getRightmenu,method:"get"})}function l(){return Object(n["a"])({url:o.commitOrder,method:"post"})}function u(e){return Object(n["a"])({url:o.dofood,method:"post",data:e})}function d(){return Object(n["a"])({url:o.clearShopCar,method:"get"})}function m(e){return Object(n["a"])({url:o.doTaoCan,method:"post",data:e})}function f(e){return Object(n["a"])({url:o.change,method:"post",data:e})}},ed9f:function(e,t,a){},ee6e:function(e,t,a){"use strict";a("4214")},f099:function(e,t,a){"use strict";a("f244")},f09a:function(e,t,a){},f244:function(e,t,a){},f7de:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("a-modal",{attrs:{width:700,title:"选规格",visible:e.Visible,closable:!0,maskClosable:!1},on:{cancel:e.handleCancel}},[n("template",{slot:"footer"},[e.changeOrNo?e._e():n("a-button",{key:"back",on:{click:e.handleCancel}},[e._v(" 取消 ")]),n("a-button",{key:"submit",attrs:{type:"primary"},on:{click:e.submitForm}},[e._v(" "+e._s(!1===e.changeOrNo?"加入购物车":"保存修改")+" ")])],1),n("div",{staticClass:"guigetitle"},[n("div",{staticClass:"title"},[e._v(" 菜品："+e._s(e.item.itemName)+" "),n("a-divider",{attrs:{type:"vertical"}}),e._v("￥"+e._s(e.seleprice)+" ")],1),n("div",{staticClass:"manyoutter"},[n("img",{staticClass:"manyicon",attrs:{src:a("bc8d"),alt:""},on:{click:e.jian}}),n("div",{staticClass:"many"},[e._v(e._s(e.num))]),n("img",{staticClass:"manyicon",attrs:{src:a("e5a7"),alt:""},on:{click:e.add}})])]),e._l(e.item.more,(function(t){return n("div",{key:t.title,staticClass:"guigeContent"},[n("a-divider",{attrs:{orientation:"left"}},[e._v(" "+e._s(t.title)+" ")]),e._l(t.option,(function(a){return n("a-button",{key:a.name,class:a.name===t.choose?"selecontentItem":"unSelecontentItem",attrs:{size:"large"},on:{click:function(n){return e.choose(t,a)}}},[e._v(" "+e._s(a.name)+" ")])}))],2)}))],2)},o=[],i=a("e97f"),r={data:function(){return{Visible:!1,item:{more:[{},{}]},num:1,i:{},changeOrNo:!1,menu:[]}},computed:{seledescri:function(){var e="";return this.item.more.map((function(t){e+="".concat(t.choose,"+")})),e.slice(0,e.length-1)},seleprice:function(){var e=this.item.price;return this.item.more.map((function(t){e+=t.addprice})),e}},methods:{show:function(e){this.item=e,this.num=1,this.Visible=!0},choose:function(e,t){e.choose=t.name,e.addprice=t.addprice,e.itemNo=t.itemNo},submitForm:function(){var e=this,t=this.item,a=this.seledescri;if(-1==this.seledescri.indexOf("+")&&(a=this.seledescri+"+"),1==this.changeOrNo){var n=this.i.descri;-1==this.i.descri.indexOf("+")&&(n=this.i.descri+"+"),console.log({itemNo:t.itemNo,name:a,oldname:n,num:this.num}),Object(i["a"])({itemNo:t.itemNo,name:a,oldname:n,num:this.num,price:this.seleprice+""}).then((function(a){e.menu[e.i.grandKey].child[e.i.parentKey].num-=e.i.num,e.i.num=0,t=e.menu[e.i.grandKey].child[e.i.parentKey],e.addCar(t)}))}else!0===t.guige?Object(i["g"])({itemNo:t.itemNo,method:"add",num:this.num,detail:a}).then((function(a){e.addCar(t)})):Object(i["f"])({comboNo:t.itemNo,method:"add",num:this.num,name:this.seledescri,price:this.seleprice+""}).then((function(a){e.addCar(t)}))},addCar:function(e){var t=this;if(e.num+=this.num,!e.kids.some((function(e){if(e.descri===t.seledescri)return e.num+=t.num,!0}))){var a=JSON.parse(JSON.stringify(e));a.kids=[],e.kids.push({guige:e.guige,combo:e.combo,itemName:e.itemName,itemNo:e.itemNo,num:this.num,price:this.seleprice,descri:this.seledescri,grandKey:e.parentKey,parentKey:e.key,item:a})}this.changeOrNo=!1,this.Visible=!1},handleCancel:function(){this.Visible=!1,this.changeOrNo=!1},add:function(){this.num++},jian:function(){this.num>1&&this.num--},change:function(e,t){this.Visible=!0,this.i=e,this.num=e.num,this.menu=t,this.changeOrNo=!0,this.item=JSON.parse(JSON.stringify(e.item))}}},s=r,c=(a("9bda"),a("2877")),l=Object(c["a"])(s,n,o,!1,null,"5f07fb7e",null);t["default"]=l.exports},fce6:function(e,t,a){"use strict";a("16c6")}}]);