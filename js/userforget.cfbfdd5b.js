(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["userforget"],{"0dfc":function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("a-card",{staticStyle:{width:"100%","text-align":"center",background:"rgb(240, 242, 245)"},attrs:{bordered:!1}},[a("a-steps",{staticClass:"steps",attrs:{current:t.currentTab}},[a("a-step",{attrs:{title:"邮箱验证"}}),a("a-step",{attrs:{title:"更改密码"}}),a("a-step",{attrs:{title:"完成"}})],1),a("div",{staticClass:"content"},[0===t.currentTab?a("step2",{on:{nextStep:t.nextStep}}):t._e(),1===t.currentTab?a("step3",{attrs:{mail:t.mail},on:{nextStep:t.nextStep,prevStep:t.prevStep}}):t._e(),2===t.currentTab?a("step4",{on:{prevStep:t.prevStep,finish:t.finish}}):t._e()],1)],1)},o=[],r=a("7763"),n=a("a4ce"),i=a("cd2d"),l={name:"Alteration",components:{Step2:r["default"],Step3:n["default"],Step4:i["default"]},data:function(){return{description:"将一个冗长或用户不熟悉的表单任务分成多个步骤，指导用户完成。",currentTab:0,userList:{},form:null,mail:""}},methods:{nextStep:function(t){this.mail=t.email,this.currentTab<4&&(this.currentTab+=1)},prevStep:function(){this.currentTab>0&&(this.currentTab-=1)},finish:function(){this.currentTab=0}}},c=l,d=(a("7146"),a("2877")),p=Object(d["a"])(c,s,o,!1,null,"edf91c52",null);e["default"]=p.exports},"16c6":function(t,e,a){},4214:function(t,e,a){},"6d93":function(t,e,a){"use strict";a("9b2b")},7146:function(t,e,a){"use strict";a("ed9f")},7763:function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("a-form-model",{ref:"form",staticClass:"password-retrieval-form",attrs:{model:t.model,rules:t.validatorRules},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.nextStep.apply(null,arguments)}}},[a("a-form-model-item",{attrs:{label:"邮箱",required:"",prop:"mail",labelCol:{span:5},wrapperCol:{span:19}}},[a("a-row",{attrs:{gutter:16}},[a("a-col",{staticClass:"gutter-row",attrs:{span:20}},[a("a-input",{attrs:{type:"text",autocomplete:"false",placeholder:"请输入邮箱号"},model:{value:t.model.mail,callback:function(e){t.$set(t.model,"mail",e)},expression:"model.mail"}},[a("a-icon",{style:{color:"rgba(0,0,0,.25)"},attrs:{slot:"prefix",type:"mail"},slot:"prefix"})],1)],1)],1)],1),t.show?a("a-form-model-item",{attrs:{required:"",prop:"captcha",label:"验证码",labelCol:{span:5},wrapperCol:{span:19}}},[a("a-row",{attrs:{gutter:16}},[a("a-col",{staticClass:"gutter-row",attrs:{span:12}},[a("a-input",{attrs:{type:"text",placeholder:"邮箱验证码"},model:{value:t.model.captcha,callback:function(e){t.$set(t.model,"captcha",e)},expression:"model.captcha"}},[a("a-icon",{style:{color:"rgba(0,0,0,.25)"},attrs:{slot:"prefix",type:"code"},slot:"prefix"})],1)],1),a("a-col",{staticClass:"gutter-row",attrs:{span:8}},[a("a-button",{attrs:{tabindex:"-1",size:"default",disabled:t.state.smsSendBtn},domProps:{textContent:t._s(t.state.smsSendBtn?t.state.time+" s":"获取验证码")},on:{click:function(e){return e.stopPropagation(),e.preventDefault(),t.getCaptcha.apply(null,arguments)}}})],1)],1)],1):t._e(),a("a-form-model-item",{attrs:{wrapperCol:{span:19,offset:5}}},[a("router-link",{staticStyle:{float:"left","line-height":"40px"},attrs:{to:{name:"login"}}},[t._v("使用已有账户登录")]),a("a-button",{staticStyle:{"margin-left":"20px"},attrs:{type:"primary"},on:{click:t.nextStep}},[t._v("下一步")])],1)],1)],1)},o=[],r=a("365c"),n={name:"Step2",props:["userList"],data:function(){return{model:{},loading:!1,dropList:"0",smscode:1,captcha:"",show:!0,state:{time:60,smsSendBtn:!1},formLogin:{captcha:"",mail:""},validatorRules:{mail:[{required:!0,message:"请输入邮箱号!"},{validator:this.validateMail}],captcha:[{required:!0,message:"请输入邮箱验证码!"}]}}},computed:{},methods:{nextStep:function(){var t=this,e=this;e.loading=!0,this.$refs["form"].validate((function(a){1==a&&(t.model.captcha.toUpperCase()===t.smscode.toUpperCase()?e.$emit("nextStep",{email:t.model.mail}):t.cmsFailed("验证码错误"))}))},getCaptcha:function(t){t.preventDefault();var e=this;e.$refs["form"].validateField("mail",(function(t){if(t)e.cmsFailed(t);else{e.state.smsSendBtn=!0;var a=window.setInterval((function(){e.state.time--<=0&&(e.state.time=60,e.state.smsSendBtn=!1,window.clearInterval(a))}),1e3),s=e.$message.loading("验证码发送中..",0);Object(r["d"])({sendTo:e.model.mail}).then((function(t){e.smscode=t.msg,setTimeout(s,500)}))}}))},cmsFailed:function(t){"该用户不存在或未绑定手机号"==t&&(t="该用户不存在或者未绑定邮箱"),this.$notification["error"]({message:"验证错误",description:t,duration:4}),console.log(t)},handleChangeSelect:function(t){var e=this;console.log(t),0==t?(e.dropList="0",e.show=!0):(e.dropList="1",e.show=!1)},validateMail:function(t,e,a){if(e){var s=/^[A-Za-zd0-9]+([-_.][A-Za-zd]+)*@([A-Za-zd]+[-.])+[A-Za-zd]{2,5}$/;s.test(e)?a():a("请输入正确的邮箱号")}else a()}}},i=n,l=(a("6d93"),a("2877")),c=Object(l["a"])(i,s,o,!1,null,"f2825f7a",null);e["default"]=c.exports},"9a3d":function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"result"},[a("div",[a("a-icon",{class:[t.isSuccess?"success":"error","icon"],attrs:{type:t.isSuccess?"check-circle":"close-circle"}})],1),t.title?a("div",{staticClass:"title"},[t._v(t._s(t.title))]):t._e(),t.description?a("div",{staticClass:"description"},[t._v(t._s(t.description))]):t._e(),t.content?a("div",{staticClass:"content"},[t._t("default")],2):t._e(),a("div",{staticClass:"action"},[t._t("action")],2)])},o=[],r={name:"Result",props:{isSuccess:{type:Boolean,default:!1},title:{type:String,default:""},description:{type:String,default:""},content:{type:Boolean,default:!0}}},n=r,i=(a("fce6"),a("2877")),l=Object(i["a"])(n,s,o,!1,null,"5cd17224",null);e["default"]=l.exports},"9b2b":function(t,e,a){},a4ce:function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("a-form-model",{ref:"form",staticClass:"password-retrieval-form",attrs:{model:t.model,rules:t.validatorRules}},[a("a-form-model-item",t._b({staticClass:"stepFormText",attrs:{prop:"password",label:"新密码"}},"a-form-model-item",t.layout,!1),[a("a-input",{attrs:{type:"password",autocomplete:"false"},model:{value:t.model.password,callback:function(e){t.$set(t.model,"password",e)},expression:"model.password"}})],1),a("a-form-model-item",t._b({staticClass:"stepFormText",attrs:{prop:"confirmPassword",label:"确认密码"}},"a-form-model-item",t.layout,!1),[a("a-input",{attrs:{type:"password",autocomplete:"false"},model:{value:t.model.confirmPassword,callback:function(e){t.$set(t.model,"confirmPassword",e)},expression:"model.confirmPassword"}})],1),a("a-form-model-item",{attrs:{wrapperCol:{span:19,offset:5}}},[a("a-button",{staticStyle:{"margin-left":"8px"},on:{click:t.prevStep}},[t._v("上一步")]),a("a-button",{staticStyle:{"margin-left":"20px"},attrs:{loading:t.loading,type:"primary"},on:{click:t.nextStep}},[t._v("提交")])],1)],1)],1)},o=[],r=a("365c"),n={name:"Step3",props:["mail"],data:function(){return{model:{},layout:{labelCol:{span:5},wrapperCol:{span:19}},loading:!1,validatorRules:{password:[{required:!0,pattern:/^(?=.*[a-zA-Z])(?=.*\d)(?=.*[~!@#$%^&*()_+`\-={}:";'<>?,.\/]).{8,}$/,message:"密码由8位数字、大小写字母和特殊符号组成!!"}],confirmPassword:[{required:!0,message:"密码不能为空!"},{validator:this.handlePasswordCheck}]}}},methods:{nextStep:function(){var t=this,e=this;e.loading=!0,e.$refs["form"].validate((function(a){!0===a?Object(r["f"])({confirmPassword:t.model.confirmPassword,password:t.model.confirmPassword,email:t.mail}).then((function(a){200===a.code?(t.$emit("nextStep",{mail:t.mail}),e.loading=!1):(e.passwordFailed(a.message),e.loading=!1)})):e.loading=!1}))},prevStep:function(){this.$emit("prevStep")},handlePasswordCheck:function(t,e,a){var s=this.model["password"];e&&s&&e.trim()!==s.trim()&&a(new Error("两次密码不一致")),a()},passwordFailed:function(t){this.$notification["error"]({message:"更改密码失败",description:t,duration:4})}}},i=n,l=(a("ee6e"),a("2877")),c=Object(l["a"])(i,s,o,!1,null,"4e9f3f93",null);e["default"]=c.exports},be89:function(t,e,a){"use strict";a("c2b5")},c2b5:function(t,e,a){},cd2d:function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("a-form",{staticStyle:{margin:"40px auto 0"}},[a("result",{attrs:{title:"更改密码成功","is-success":!0}},[a("div",{staticClass:"toLogin"},[a("h3",[t._v("将在"),a("span",[t._v(t._s(t.time))]),t._v("秒后返回登录页面.")])])])],1)],1)},o=[],r=a("9a3d"),n={name:"Step4",components:{Result:r["default"]},data:function(){return{loading:!1,time:0}},methods:{countDown:function(){var t=this;t.time--}},mounted:function(){var t=this;t.time=5,setInterval(t.countDown,1e3)},watch:{time:function(t,e){0==t&&this.$router.push({name:"login"})}}},i=n,l=(a("be89"),a("2877")),c=Object(l["a"])(i,s,o,!1,null,"4c40702e",null);e["default"]=c.exports},ed9f:function(t,e,a){},ee6e:function(t,e,a){"use strict";a("4214")},fce6:function(t,e,a){"use strict";a("16c6")}}]);